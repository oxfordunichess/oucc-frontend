{"version":3,"sources":["css/page.module.css","css/components.module.css","assets/icons/facebook.png","assets/icons/twitter.png","assets/icons/linkedin.png","assets/icons/mail.png","css/footer.module.css","css sync /^/.*$","css/calendar.module.css","utils/contexts.ts","utils/axios.ts","Header/mobile.tsx","Header/banner.tsx","utils/regexes.ts","Header/runner.tsx","Header/index.tsx","utils/components.tsx","components/Profile.tsx","utils/prototype.ts","components/Table.tsx","utils/fen.ts","components/Chess.tsx","Calendar/event.tsx","Calendar/index.tsx","components/Calendar.tsx","components/Form.tsx","components/Image.tsx","utils/plugins.tsx","utils/auth.ts","components/Footer.tsx","pages/Page.tsx","pages/News.tsx","pages/NotFound.tsx","Auth/Callback.tsx","Auth/Auth.tsx","App.tsx","serviceWorker.js","index.js","css/header.module.css"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","SessionContext","createContext","server","axios","defaults","baseURL","Header","context","state","subnav","expanded","navigation","navToggle","link","setState","toggleThumb","url","params","sessionID","this","then","res","data","catch","console","error","getNavigationData","className","styles","header","mobileHeader","join","bannerContainer","mobileContainer","banner","mobileBanner","mobileTextContainer","mobileMenu","mobileLinks","mobileLinksShown","mobileLinksHidden","entries","i","name","parents","key","mobileSection","length","dropParent","onClick","slice","dropChild","to","mobileThumbContainer","src","process","alt","React","Component","contextType","Banner","_nav","navLeave","navEnter","side","current","window","location","pathname","nav","section","spacer","s","children","onMouseEnter","onMouseLeave","includes","some","c","selected","renderNav","oucc_logo","style","backgroundImage","overflowY","letters","image","date","href","newLineString","mobile","imageExt","require","Runner","feedPosition","width","inc","x","y","innerWidth","props","articles","text","offsets","refs","filter","startsWith","offsetLeft","transformation","split","shift","trim","match","regexes","toLowerCase","transform","setSection","ref","dummy","scrollWidth","setInterval","newsFeed","intro","runner","getNewsFeed","visibility","_location","RouterLink","test","Profile","thumbnail","profile","rightPane","leftPane","subtitle","links","line","target","rel","centerPane","description","replace","capitalise","str","TypeError","toUpperCase","Table","table","Promise","all","getData","endsWith","Papa","parse","dynamicTyping","skipEmptyLines","obj","k","generateTablefromJSON","getDate","Date","commit","committer","textAlign","toString","file","body","scope","values","path","page","per_page","config","board","pieces","coords","size","analysis","crazyhouse","threeCheck","chess","FEN","argument","_fenArray","_positionFenArray","_flip","_variant","_checks","fen","_regex","RegExp","regexString","colour","analysisURL","imageURL","fenArray","regex","reduce","acc","curr","undefined","push","variant","splice","positionFenArray","inhand","checks","isNaN","Number","winhandstring","binhandstring","repeat","bold","flip","qs","stringify","positionfen","piece","coordinates","ext","encodeURIComponent","FENConstructor","space","facebook","Event","parsedCalendar","event","locationReplacers","mapsLink","title","status","start","created","end","calendarID","calendarName","color","rawLocation","rawDescription","_facebookEvent","_description","htmlLink","summary","dateTime","he","decode","l","facebookEvent","indexOf","Calendar","updateColourStatuses","calendars","assign","calendarIDs","today","getEventDate","now","settings","finish","weeks","events","days","mounted","prevCalendarIDs","interpretProps","v","renderEvents","getTime","setDate","tableContainer","day","firstColumn","week","timestamp","cell","every","sort","a","b","getHours","getMinutes","display","eventHeader","eventName","toolContainer","tooltip","eventTitle","getDisplayTime","dateNumber","toDateString","search","query","q","calendarId","singleEvents","timeZone","maxAttendees","maxResults","sanitizeHtml","timeMin","toISOString","timeMax","dates","items","forEach","sorted","container","renderKey","renderFrame","hash","setHours","setMinutes","setSeconds","setMilliseconds","valueOf","date1","date2","getFullYear","getMonth","parseInt","reject","getSettings","Form","contactForm","method","action","contactTable","fields","input","type","textarea","rows","value","submit","reset","Jotform","iframe","addEventListener","args","scrollIntoView","height","clientHeight","innerHeight","reload","script","document","createElement","appendChild","doc","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","origin","contentWindow","urls","URL","referrer","postMessage","JSON","interpretStyle","jotform","onLoad","parent","scrollTo","allowTransparency","allowFullScreen","allow","frameBorder","minWidth","border","Album","ratio","useState","currentImage","setCurrentImage","viewerIsOpen","setViewerIsOpen","photos","index","filename","pop","extension","customRatioSrc","customRatio","source","srcSet","setPhotos","openLightbox","useCallback","photo","maxRedirects","entry","grid","carousel","enableLightbox","margin","columns","targetRowHeight","onClickItem","infiniteLoop","useKeyboardArrows","showStatus","emulateTouch","axis","autoPlay","selectedItem","showThumbs","interval","transitionTime","centerMode","dynamicHeight","onClose","currentIndex","views","caption","htmlParser","processNodeDefinitions","ProcessNodeDefinitions","parseHtml","setWide","isValidNode","node","processingInstructions","shouldProcessNode","processNode","attribs","processDefaultNode","isMobile","navigator","userAgent","vendor","substr","Footer","footer","mail","Page","setPage","useReducer","wide","session","useContext","useEffect","getPage","p","sections","querySelector","setAttribute","Helmet","mobilePage","main","mobileMain","escapeHtml","astPlugins","renderers","transformImageUri","uri","News","Map","components","lines","joined","set","find","get","defaultTitle","property","content","NotFound","Auth","success","service","access_token","searchString","log","verify","mailchimpMail","email","setSuccess","setError","preventDefault","form","Array","from","elements","componentStyles","onSubmit","paddingTop","padding","cachedPages","App","Math","random","getIndex","fetchArticles","markdownPaths","exact","private","render","open","redirect","Provider","routeMap","basename","Package","version","component","getArticleList","filenames","real","a_date","b_date","names","getArticle","Boolean","hostname","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8b82653a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"page_page__g1c2x\",\"main\":\"page_main__jGfys\",\"section\":\"page_section__1fg7U\",\"wide\":\"page_wide__PCvHR\",\"mobilePage\":\"page_mobilePage__AiV44\",\"mobileMain\":\"page_mobileMain__3xbCq\",\"mobileSection\":\"page_mobileSection__-Ut7s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"components_profile__3x-uE\",\"thumbnail\":\"components_thumbnail__2zEfG\",\"leftPane\":\"components_leftPane__1eZcm\",\"text\":\"components_text__2pHeI\",\"board\":\"components_board__pYlRj\",\"input\":\"components_input__38iVB\",\"textarea\":\"components_textarea__3U2rR\",\"contactForm\":\"components_contactForm__cJkrq\",\"contactTable\":\"components_contactTable__8KJVO\",\"grid\":\"components_grid__3JWL4\",\"carousel\":\"components_carousel__1Xcsw\",\"jotform\":\"components_jotform__26jv7\"};","module.exports = __webpack_public_path__ + \"static/media/facebook.2c121c2e.png\";","module.exports = __webpack_public_path__ + \"static/media/twitter.b835b27b.png\";","module.exports = __webpack_public_path__ + \"static/media/linkedin.b424c19c.png\";","module.exports = __webpack_public_path__ + \"static/media/mail.ebed66a8.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"footer_footer__1ZjHM\",\"link\":\"footer_link__2i2S6\",\"image\":\"footer_image__1zR-F\"};","var map = {\n\t\"./calendar.module.css\": 262,\n\t\"./components.module.css\": 13,\n\t\"./footer.module.css\": 25,\n\t\"./header.module.css\": 4,\n\t\"./page.module.css\": 10\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 261;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"calendar_container__3jc5j\",\"tableContainer\":\"calendar_tableContainer__1d5am\",\"table\":\"calendar_table__1STq8\",\"key\":\"calendar_key__10QPp\",\"status\":\"calendar_status__328_7\",\"event\":\"calendar_event__Fpsnm\",\"eventHeader\":\"calendar_eventHeader__1LM4e\",\"eventName\":\"calendar_eventName__11Rtc\",\"eventTitle\":\"calendar_eventTitle__253CO\",\"noEvent\":\"calendar_noEvent__21QAe\",\"firstColumn\":\"calendar_firstColumn__2TydK\",\"cell\":\"calendar_cell__b_gO3\",\"today\":\"calendar_today__36RHA\",\"toolContainer\":\"calendar_toolContainer__3iaLn\",\"tooltip\":\"calendar_tooltip__76C0K\"};","import { createContext } from 'react';\r\n\r\nconst SessionContext = createContext('');\r\n\r\nexport { SessionContext };","import axios from 'axios';\r\n\r\nconst allowDev = false;\r\n\r\nexport const devServer = 'http://localhost:8081/';\r\n\r\nexport const prodServer = 'https://oxfordunichess.github.io/oucc-backend/';\r\n\r\nexport const server = process.env.NODE_ENV === 'development' && allowDev ? devServer : prodServer;\r\n\r\naxios.defaults.baseURL = server;\r\n\r\nexport default axios;","import React, { ReactElement } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { NavigationData } from './interfaces';\r\nimport { SessionContext } from '../utils/contexts';\r\nimport axios from '../utils/axios';\r\n\r\nimport styles from '../css/header.module.css';\r\n\r\nexport default class Header extends React.Component<{}, {\r\n\tsubnav: string,\r\n\texpanded: boolean,\r\n\tnavigation: NavigationData,\r\n}> {\r\n\r\n\tstatic contextType = SessionContext;\r\n\tpublic context: React.ContextType<typeof SessionContext>;\r\n\r\n\tpublic state = {\r\n\t\tsubnav: '',\r\n\t\texpanded: false,\r\n\t\tnavigation: {} as NavigationData\r\n\t}\r\n\r\n\tprivate getNavigationData(): Promise<NavigationData> {\r\n\t\treturn axios({\r\n\t\t\turl: 'navigation.json',\r\n\t\t\tparams: {sessionID: this.context}\r\n\t\t })\r\n\t\t\t.then(res => res.data)\r\n\t\t\t.catch(console.error);\r\n\t}\r\n\r\n\tcomponentDidMount(): void {\r\n\t\tthis.getNavigationData()\r\n\t\t\t.then((navigation) => {\r\n\t\t\t\tthis.setState({ navigation });\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate navToggle = (link: string) => {\r\n\t\tif (this.state.subnav === link) this.setState({ subnav: '' });\r\n\t\telse this.setState({ subnav: link });\r\n\t}\r\n\r\n\tprivate toggleThumb = () => {\r\n\t\tthis.setState({\r\n\t\t\tsubnav: 'members',\r\n\t\t\texpanded: !this.state.expanded\r\n\t\t});\r\n\t}\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div className={[styles.header, styles.mobileHeader].join(' ')}>\r\n\t\t\t\t\t<div className={[styles.bannerContainer, styles.mobileContainer].join(' ')}>\r\n\t\t\t\t\t\t<div className={[styles.banner, styles.mobileBanner].join(' ')}>\r\n\t\t\t\t\t\t\t<div className={styles.mobileTextContainer}>\r\n\t\t\t\t\t\t\t\tOxford University Chess Club\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.mobileMenu}>\r\n\t\t\t\t\t{this.state.expanded ? <div className={[styles.mobileLinks, this.state.expanded ? styles.mobileLinksShown : styles.mobileLinksHidden].join(' ')}>\r\n\t\t\t\t\t\t{Object.entries(this.state.navigation).map(([link, [_s, name, ...parents]], i) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={[name, i].join('.')} className={styles.mobileSection} >\r\n\t\t\t\t\t\t\t\t\t{!parents.length ?\r\n\t\t\t\t\t\t\t\t\t\t<Link className={styles.dropParent} to={'/' + link}>\r\n\t\t\t\t\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t\t\t\t\t</Link> :\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={styles.dropParent} onClick={() => this.navToggle(link)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{parents.length ? this.state.subnav === link ? '▽' : '▷' : ''} {name}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t{this.state.subnav === link ? (parents).map(([link, name]) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link key={link.slice(1)} className={[styles.dropParent, styles.dropChild].join(' ')} to={link}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}) : null}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<div className={styles.mobileSection} >\r\n\t\t\t\t\t\t\t<Link className={styles.dropParent} to={'/'}>\r\n\t\t\t\t\t\t\t\tHome\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> : null}\r\n\t\t\t\t\t<div className={styles.mobileThumbContainer} onClick={this.toggleThumb}>\r\n\t\t\t\t\t\t<img src={process.env.PUBLIC_URL + '/images/oucclogo.jpg'} alt='' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n}","import React, { ReactElement } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Side, NavCache, NavigationData } from './interfaces';\r\nimport axios from '../utils/axios';\r\nimport { SessionContext } from '../utils/contexts';\r\n\r\nimport styles from '../css/header.module.css';\r\n\r\nexport default class Banner extends React.Component <{}, {\r\n\tsubnav: string,\r\n\tnavigation: NavigationData,\r\n}> {\r\n\r\n\tstatic contextType = SessionContext;\r\n\tpublic context: React.ContextType<typeof SessionContext>;\r\n\r\n\tprivate _nav?: NavCache;\r\n\r\n\tpublic state = {\r\n\t\tsubnav: 'members',\r\n\t\tnavigation: {} as NavigationData,\r\n\t}\r\n\r\n\tprivate navToggle(subnav: string): void {\r\n\t\tif (this.state.subnav === subnav) this.navLeave();\r\n\t\telse this.navEnter(subnav);\r\n\t}\r\n\r\n\tprivate navEnter(subnav: string): void {\r\n\t\tthis.setState({subnav});\r\n\t}\r\n\r\n\tprivate navLeave(): void {\r\n\t\tthis.setState({subnav: ''});\t\r\n\t}\r\n\r\n\tprivate renderNav(side: Side): ReactElement {\r\n\t\tlet current = window.location.pathname;\r\n\t\tif (!this._nav) this._nav = {};\r\n\t\tlet nav = (\r\n\t\t\t<div\r\n\t\t\t\tclassName={styles.nav + ' ' + styles[side]}\r\n\t\t\t>\r\n\t\t\t\t{side !== 'left' ? null : <div className={styles.section}>\r\n\t\t\t\t\t<div className={styles.spacer} />\r\n\t\t\t\t</div>}\r\n\t\t\t\t{Object.entries(this.state.navigation).map(([link, [s, name, ...children]], i) => {\r\n\t\t\t\t\tif (s !== side) return null;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={[name, i].join('.')}\r\n\t\t\t\t\t\t\tclassName={styles.section}\r\n\t\t\t\t\t\t\tonClick={() => this.navToggle(link)}\r\n\t\t\t\t\t\t\tonMouseEnter={() => this.navEnter(link)}\r\n\t\t\t\t\t\t\tonMouseLeave={() => this.navLeave()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tclassName={[\r\n\t\t\t\t\t\t\t\t\tstyles.dropParent,\r\n\t\t\t\t\t\t\t\t\tcurrent.includes(link) || (children.length && children.some(c => c[0] === current)) ? styles.selected : ''\r\n\t\t\t\t\t\t\t\t].join(' ')}\r\n\t\t\t\t\t\t\t\tkey={link} to={'/' + link}>{name}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t{children.length && this.state.subnav === link ? (children).map(([link, name]) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Link key={link.slice(1)} to={link} className={[\r\n\t\t\t\t\t\t\t\t\t\tstyles.dropParent,\r\n\t\t\t\t\t\t\t\t\t\tstyles.dropChild,\r\n\t\t\t\t\t\t\t\t\t\tcurrent.includes(link) ? styles.selected : ''\t\r\n\t\t\t\t\t\t\t\t\t].join(' ')}>\r\n\t\t\t\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}) : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t{side !== 'right' ? null : <div className={styles.section}>\r\n\t\t\t\t\t<div className={styles.spacer} />\r\n\t\t\t\t</div>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t\tif (Object.keys(this.state.navigation).length) return this._nav[side] = nav;\r\n\t\telse return nav;\r\n\t}\r\n\r\n\tprivate getNavigationData(): Promise<NavigationData> {\r\n\t\treturn axios({\r\n\t\t\turl: 'navigation.json',\r\n\t\t\tparams: {sessionID: this.context}\r\n\t\t })\r\n\t\t\t.then(res => res.data)\r\n\t\t\t.catch(console.error);\r\n\t}\r\n\r\n\tcomponentDidMount(): void {\r\n\t\tthis.getNavigationData()\r\n\t\t\t.then((navigation) => {\r\n\t\t\t\tif (navigation) this.setState({ navigation });\r\n\t\t\t});\r\n\t}\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<div className={styles.bannerContainer}>\r\n\t\t\t\t<div className={styles.banner}>\r\n\t\t\t\t\t{this.renderNav('left')}\r\n\t\t\t\t\t<Link className={styles.oucc_logo} to='/' style={{\r\n\t\t\t\t\t\tbackgroundImage: `url(${process.env.PUBLIC_URL}/images/oucclogo.jpg`,\r\n\t\t\t\t\t\toverflowY: 'visible'\r\n\t\t\t\t\t}}/>\r\n\t\t\t\t\t{this.renderNav('right')}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","\r\nexport const space = /\\s+/g;\r\n\r\nexport const letters = /\\w+/g;\r\n\r\nexport const image = /<img\\s+.*?src=[\"'](.*).*?\">/;\r\n\r\nexport const date = /^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}_/;\r\n\r\nexport const href = /^(https?:)?\\/\\//;\r\n\r\nexport const newLine = /\\n+/g;\r\n\r\nexport const newLineString = /\\\\n+/g;\r\n\r\nexport const mobile = [\r\n\t/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,\r\n\t/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i\r\n];\r\n\r\nexport const imageExt = /(gif|jpe?g|tiff|png|webp|bmp)$/i;","import React, {ReactElement} from 'react';\r\nimport * as regexes from '../utils/regexes';\r\nconst fps = 60;\r\nconst styles = require('../css/header.module.css');\r\n\r\nexport default class Runner extends React.Component<{\r\n\tarticles: string[];\r\n}, {\r\n\tnavigation: object;\r\n\tfeedPosition: number;\r\n\twidth: number;\r\n}> {\r\n\r\n\tpublic state = {\r\n\t\tnavigation: {},\r\n\t\tfeedPosition: 0,\r\n\t\twidth: 0\r\n\t}\r\n\r\n\tstatic setSection(_location: Location, id: string): string {\r\n\t\treturn process.env.PUBLIC_URL + '/curr_news#' + id;\r\n\t}\r\n\r\n\tgetNewsFeed(inc?: number): ReactElement[] | null {\r\n\t\tlet x = this.state.width;\r\n\t\tlet y = window.innerWidth;\r\n\t\treturn this.props.articles.map((text: string, i: number): ReactElement => {\r\n\t\t\tlet offsets = inc ? Object.entries(this.refs)\r\n\t\t\t\t.filter(([k]): boolean => k.startsWith('feed'))\r\n\t\t\t\t.map(([_k, v]): number => {\r\n\t\t\t\t\treturn (v as HTMLElement).offsetLeft - this.state.width\r\n\t\t\t\t})\r\n\t\t\t: [];\r\n\t\t\tlet transformation = inc ? (inc + offsets[i] - y) % x + y - offsets[i] : 0;\r\n\t\t\tif (typeof text !== 'string') return null;\r\n\t\t\tif (!text || typeof text.split !== 'function') {\r\n\t\t\t\tconsole.error('Bad Markdown document:\\n', text);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet lines = text.split('\\n');\r\n\t\t\tlet header = lines.shift().trim();\r\n\t\t\twhile (header.startsWith('#')) {\r\n\t\t\t\theader = header.slice(1);\r\n\t\t\t}\r\n\t\t\tlet id = header.match(regexes.letters).join('-').toLowerCase();\r\n\t\t\treturn (\r\n\t\t\t\t<div key={id + '.container'} style={inc ? {\r\n\t\t\t\t\ttransform: `translate3d(${transformation}px, 0, 0)`\r\n\t\t\t\t} : {}}>\r\n\t\t\t\t\t<a href={Runner.setSection(window.location, id)} ref={'feed' + i} key={id}>\r\n\t\t\t\t\t\t{header}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t{' • '}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate(): void {\r\n\t\tif (this.state.width) return;\r\n\t\tif (this.refs.dummy && (this.refs.dummy as HTMLElement).scrollWidth) this.setState({\r\n\t\t\twidth: (this.refs.dummy as HTMLElement).scrollWidth\r\n\t\t});\r\n\t}\r\n\r\n\tasync componentDidMount(): Promise<void> {\r\n\t\tsetInterval(() => {\r\n\t\t\tlet feedPosition = this.state.feedPosition;\r\n\t\t\tthis.setState({\r\n\t\t\t\tfeedPosition: feedPosition + 0.5\r\n\t\t\t});\r\n\t\t}, 1000 / fps);\r\n\t}\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<div className={styles.newsFeed}>\r\n\t\t\t\t<div className={styles.intro}>\r\n\t\t\t\t\tLatest News: \r\n\t\t\t\t</div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div className={styles.runner}>\r\n\t\t\t\t\t<div ref='runner'>\r\n\t\t\t\t\t\t{this.getNewsFeed(-this.state.feedPosition)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ref='dummy' style={{\r\n\t\t\t\t\t\tvisibility: 'hidden'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{this.getNewsFeed()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React, { ReactElement } from 'react';\r\n\r\nimport Banner from './banner';\r\nimport Runner from './runner';\r\n\r\nconst styles = require('../css/header.module.css');\r\n\r\nexport default class Header extends React.Component<{\r\n\tarticles: string[]\r\n}> {\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<div className={styles.header}>\r\n\t\t\t\t<Banner />\r\n\t\t\t\t<Runner articles={this.props.articles} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React, { ReactElement } from 'react';\r\nimport url from 'url';\r\nimport { Link } from 'react-router-dom';\r\nimport * as regexes from './regexes';\r\nimport { server } from './axios';\r\n\r\ninterface aProps {\r\n\thref: string,\r\n\tchildren: HTMLElement[],\r\n}\r\n\r\nexport function RouterLink(props: aProps): ReactElement {\r\n\tif (regexes.href.test(props.href)) {\r\n\t\treturn <a href={props.href}>{props.children}</a>;\r\n\t} else\r\n\tif (props.href.startsWith('../')) {\r\n\t\treturn <a href={url.resolve(server + 'pages/', props.href)}>{props.children}</a>\r\n\t} else\r\n\tif (props.href.startsWith('./')) {\r\n\t\treturn <a href={url.resolve(server, props.href)}>{props.children}</a>\r\n\t} else {\r\n\t\treturn <Link to={props.href}>{props.children}</Link>\r\n\t}\r\n}","import React, {ReactElement} from 'react';\r\nimport url from 'url';\r\nimport { ProfileProps } from '../pages/interfaces';\r\nimport * as regexes from '../utils/regexes';\r\nimport { server } from '../utils/axios';\r\n\r\nconst styles = require('../css/components.module.css');\r\n\r\nexport default class Profile extends React.Component<ProfileProps> {\r\n\r\n\trender(): ReactElement {\r\n\t\tlet src = regexes.href.test(this.props.thumbnail) ? this.props.thumbnail : url.resolve(server, 'images/logos/' + this.props.thumbnail);\r\n\t\treturn (\t\t\t\r\n\t\t\t<div className={styles.profile}> \t\t\t\t\r\n\t\t\t\t<div className={styles.rightPane}>\r\n\t\t\t\t\t<img className={styles.thumbnail} src={src} alt={this.props.thumbnail}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.leftPane}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h2>{this.props.name}</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h3>{this.props.subtitle}</h3>\r\n\t\t\t\t\t\t{this.props.links.split('\\\\n')\r\n\t\t\t\t\t\t\t.map((line, i) => {\r\n\t\t\t\t\t\t\t\tlet [text, href] = line.split(',');\r\n\t\t\t\t\t\t\t\tif (!href) return <h3 key={['text', i].join('.')}>{text}</h3>;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<h3 key={['text', i].join('.')}>\r\n\t\t\t\t\t\t\t\t\t\t<a key={[text.slice(0, 5), i].join('.')} href={href} target='_blank' rel='noopener noreferrer'>{text}</a>\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.centerPane}>\r\n\t\t\t\t\t<div className={styles.text}>{this.props.description.replace(regexes.newLineString, '\\n\\n')}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import * as regexes from './regexes';\r\n\r\nexport function capitalise(str: string): string {\r\n\tif (typeof str !== 'string') throw new TypeError();\r\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1).toLowerCase();\r\n}\r\n\r\nexport function getIDFromTitle(str: string): string {\r\n\twhile (str.startsWith('#')) {\r\n\t\tstr = str.slice(1);\r\n\t}\r\n\tstr = str.trim();\r\n\treturn str.match(regexes.letters).join('-').toLowerCase();\r\n}\r\n\r\nexport function BooleanDeserialise(str: string): {[key: number]: boolean, [key: string]: boolean} {\r\n\treturn str\r\n\t\t.split('&')\r\n\t\t.map(q => q.split('='))\r\n\t\t.map(([k, v]): [string, boolean] => v === 'false' ? [k, false] : [k, true])\r\n\t\t.reduce((acc, [k, v]) => {\r\n\t\t\tacc[k] = v;\r\n\t\t\treturn acc;\r\n\t\t}, {} as {[key: number]: boolean, [key: string]: boolean});\r\n}\r\n\r\nexport function BooleanSerialise(obj: {[key: number]: boolean, [key: string]: boolean}): string {\r\n\treturn Object.entries(obj)\r\n\t\t.map(([k, v]) => k.toString() + '=' + v.toString())\r\n\t\t.join('&');\r\n}","import React, { ReactElement } from 'react';\r\nimport Papa from 'papaparse';\r\nimport { TableJSON } from '../pages/interfaces';\r\nimport { GithubCommit } from '../interfaces';\r\n\r\nimport { capitalise } from '../utils/prototype';\r\n\r\nimport axios from '../utils/axios';\r\n\r\nexport default class Table extends React.Component<{\r\n\tsrc: string,\r\n\tsessionID: string\r\n}, {\r\n\ttable: ReactElement,\r\n\tdate: Date | null\r\n}> {\r\n\r\n\tpublic state = {\r\n\t\ttable: null as ReactElement,\r\n\t\tdate: null as Date | null\r\n\t}\r\n\r\n\tstatic getData(file: string, sessionID: string): any {\r\n\t\treturn axios({\r\n\t\t\turl: file,\r\n\t\t\tparams: {sessionID}\r\n\t\t})\r\n\t\t\t.then(res => res.data)\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn [null];\r\n\t\t\t});\r\n\t}\r\n\r\n\tstatic async generateTablefromJSON(body: TableJSON[]): Promise<ReactElement> {\r\n\t\tlet keys = Object.keys(body[0]);\r\n\t\treturn (\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t{keys.map((key, i) => <th key={[key, i].join('.')} scope='column'>{capitalise(key)}</th>)}\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{body.map((line) => {\r\n\t\t\t\t\t\tlet id = Object.values(line)[0] ? Object.values(line)[0].toString().toLowerCase().replace(/\\s+/g, '-') : null;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<tr key={id} id={id} >{\r\n\t\t\t\t\t\t\t\tkeys.map((key, i) => <td key={[key, i].join('.')}>{key in line ? line[key] : null}</td>)\r\n\t\t\t\t\t\t\t}</tr>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t);\r\n\t}\r\n\r\n\tstatic getDate(file: string): any {\r\n\t\treturn axios({\r\n\t\t\tbaseURL: 'https://api.github.com/repos/oxfordunichess/oucc-backend/',\r\n\t\t\turl: 'commits',\r\n\t\t\tparams: {\r\n\t\t\t\tpath: file,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tper_page: 1\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => res.data)\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn [null];\r\n\t\t\t});\r\n\t}\r\n\r\n\tasync componentDidMount(): Promise<void[]> {\r\n\t\tif (!this.props.src) return;\r\n\t\treturn Promise.all([\r\n\t\t\tTable.getData('data/' + this.props.src, this.props.sessionID)\r\n\t\t\t\t.then((data: any) => {\r\n\t\t\t\t\tif (this.props.src.endsWith('.csv')) {\r\n\t\t\t\t\t\tlet res = Papa.parse(data as string, {\r\n\t\t\t\t\t\t\theader: true,\r\n\t\t\t\t\t\t\tdynamicTyping: true,\r\n\t\t\t\t\t\t\tskipEmptyLines: 'greedy'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tdata = res.data.map((obj) => {\r\n\t\t\t\t\t\t\tfor (let k of Object.keys(obj)) {\r\n\t\t\t\t\t\t\t\tif (!k) delete obj[k];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn obj;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t})\r\n\t\t\t\t.then((data: TableJSON[]) => {\r\n\t\t\t\t\treturn Table.generateTablefromJSON(data);\r\n\t\t\t\t})\r\n\t\t\t\t.then((table: ReactElement) => {\r\n\t\t\t\t\tthis.setState({table});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(console.error),\r\n\t\t\tTable.getDate('data/' + this.props.src)\r\n\t\t\t\t.then((data: GithubCommit[]) => {\r\n\t\t\t\t\tif (data[0]) return new Date(data.shift().commit.committer.date);\r\n\t\t\t\t\telse return new Date();\r\n\t\t\t\t})\r\n\t\t\t\t.then((date: Date) => {\r\n\t\t\t\t\tthis.setState({date});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(console.error)\r\n\t\t]);\r\n\t}\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<>\t\t\t\t\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\ttextAlign: 'right'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{this.state.date ? 'Last updated: ' + this.state.date.toString().slice(0, 24) : ''}\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.state.table}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}","import qs from 'querystring';\r\n\r\nconst config = {\r\n\tboard: \"icy_sea\",\r\n\tpieces: \"alpha\",\r\n\tcoords: 0,\r\n\tsize: 2,\r\n\turl: {\r\n\t\tboard: 'https://www.chess.com/dynboard|',\r\n\t\tanalysis: 'https://lichess.org/analysis?fen=|',\r\n\t\tcrazyhouse: 'https://lichess.org/analysis/crazyhouse/|',\r\n\t\tthreeCheck: 'https://lichess.org/analysis/threeCheck/|',\r\n\t\t\"racing-kings\": '',\r\n\t\tchess: ''\r\n\t}\r\n};\r\n\r\nexport default class FEN {\r\n\r\n\t/**\r\n\t * String used to compile (lazy-load) a regex\r\n\t */\r\n\tstatic get regexString (): string {\r\n\t\treturn '((?:(?:[pnbrqkPNBRQK~1-8]{1,8})\\\\/?){8})' + //Piece Placement: any of those characters, allow 1 to 8 of each, folloed by a slash, all that repeated 8 times. Standard chess FEN produced. Slash is optional (0 or 1). \r\n            '((?:[pnbrqkPNBRQK]{1,31})\\\\/?)?' + //Second group: crazyhouse additional inhand pieces, if they exist.\r\n            '\\\\s+' + //white space\r\n            '(b|w)' + //Side to Move\r\n            '\\\\s+' + //white space\r\n            '(-|K?Q?k?q?)' + //Castling Rights. Matches 0 or 1 of each, so optional.\r\n            '\\\\s+' + //white space\r\n            '(-|[a-h][3-6])' + //En Passant Possible Target Squares\r\n            '\\\\s+' + //white space\r\n            '(\\\\d+)' + //Half-Move Clock since last capture or pawn advance for 50 move rule\r\n            '\\\\s+' + //white space\r\n            '(\\\\d+)' + //Fullmove number\r\n            '\\\\s*' + //white space, may or may not exist\r\n            '(\\\\+[0-3]\\\\+[0-3])?'; //three-check extra group, may or may not exist\r\n\t}\r\n\r\n\tprivate static _regex: RegExp;\r\n\tstatic get regex (): RegExp {\r\n\t\tif (FEN._regex) return FEN._regex;\r\n\t\treturn FEN._regex = new RegExp(FEN.regexString);\r\n\t}\r\n\r\n\tconstructor (public argument: string) {\r\n\t\tif (!this.fen) throw new Error('Invalid FEN!');\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\treturn {\r\n\t\t\tcolour: this.colour,\r\n\t\t\tanalysisURL: this.analysisURL,\r\n\t\t\timageURL: this.imageURL,\r\n\t\t\tdescription: this.description\r\n\t\t};\r\n\t}\r\n\r\n\t/* The difficulty here is, not parsing the url to the analysis board, which thank to lichess is just some variant of their analysis url followed by the fen,\r\n\tBut getting the url to display the board for chess.com and parsing and generating the specialiased variant info.\r\n\tThat means the additional pieces for crazyhouse and the additional checks for threeCheck, then working out how to display them.\r\n\tthis.fen returns the simple full fen.\r\n\tthis.positionfen returns the the board position which for standard chess is the same as this.fen\r\n\t*/\r\n\tprivate _fenArray: string[];\r\n\tget fenArray(): string[] {\r\n\t\tif (this._fenArray) return this._fenArray;\r\n\t\tlet fenArray = this.argument.match(FEN.regex);\r\n\t\treturn this._fenArray = fenArray || []; //returns matches witch capture groups [full string, ...each () match group]\r\n\t}\r\n\r\n\tprivate _positionFenArray: string[];\r\n\tget positionFenArray(): string[] { //array of 6 items, beginning at 0 ending with 5.\r\n\t\tif (this._positionFenArray) return this._positionFenArray;\r\n\t\tlet fenArray = this.fenArray.slice(1).reduce((acc, curr) => {\r\n\t\t\tif (curr === null || curr === undefined) return acc;\r\n\t\t\telse acc.push(curr);\r\n\t\t\treturn acc;\r\n\t\t}, []); //first exec match is always full match\r\n\t\tif (fenArray[0].endsWith('/')) fenArray[0] = fenArray[0].slice(0, -1); //removes extra backslash prone to messing shit up\r\n\t\tif (this.variant === 'crazyhouse') fenArray.splice(1, 1); //remove zh group\r\n\t\telse if (this.variant === 'threeCheck') fenArray.splice(6, 1); //remove threecheck group\r\n\t\treturn this._positionFenArray = fenArray;\r\n\t}\r\n\r\n\tget fen(): string {\r\n\t\treturn this.fenArray[0];\r\n\t}\r\n\r\n\tget positionfen(): string {\r\n\t\treturn this.positionFenArray.join(' ').replace(/~/, '');\r\n\t}\r\n    \r\n\tget colour (): 'white' | 'black' {\r\n\t\tif (this.positionFenArray[1] === 'b') return 'black';\r\n\t\treturn 'white';\r\n\t}\r\n\r\n\tprivate _flip: boolean;\r\n\tget flip(): boolean {\r\n\t\tif (this._flip) return this._flip;\r\n\t\tif (this.variant === 'racing-kings') return false;\r\n\t\treturn this._flip = this.colour === 'black';\r\n\t}\r\n\r\n\tprivate _variant: 'crazyhouse' | 'threeCheck' | 'racing-kings' | 'chess';\r\n\tget variant(): 'crazyhouse' | 'threeCheck' | 'racing-kings' | 'chess' {\r\n\t\tif (this._variant) return this._variant;\r\n\t\tif (this.inhand) return this._variant = 'crazyhouse';\r\n\t\tif (this.checks) return this._variant = 'threeCheck';\r\n\t\treturn this._variant = 'chess';\r\n\t}\r\n\r\n\tget inhand(): string[] | undefined { //a crazyhouse thing\r\n\t\tif (!this.fenArray[2]) return undefined;\r\n\t\tlet crazyhouseRegExp = /(?:[pnbrqkPNBRQK]{1,16})\\/?/;\r\n\t\tlet fen = this.fenArray[2].match(crazyhouseRegExp);\r\n\t\tfen[1] = fen[0].replace(/[^A-Z]/g, '');\r\n\t\tfen[2] = fen[0].replace(/[^a-z]/g, '');\r\n\t\treturn fen || [];\r\n\t}\r\n\r\n\tprivate _checks: [string, number, number]\r\n\tget checks():  [string, number, number] | undefined {\r\n\t\tif (this._checks) return this._checks;\r\n\t\tif (!this.fenArray[8]) return undefined;\r\n\t\tlet threeCheckRegExp = /\\+([0-3])\\+([0-3])/;\r\n\t\tlet checks = this.fenArray[8].match(threeCheckRegExp).map(c => !isNaN(Number(c)) ? Number(c) : c) as [string, number, number];\r\n\t\treturn this._checks = checks || [this.fenArray[8], 0, 0];\r\n\t}\r\n\r\n\tget description(): string {\r\n\t\tif (!/^crazyhouse|threeCheck$/.test(this.variant)) return '';\r\n\t\tlet winhandstring, binhandstring;\r\n\t\tif (this.variant === 'crazyhouse') {\r\n\t\t\twinhandstring = this.inhand[1].split('').join(' '); //converts them to arrays of each character\r\n\t\t\tbinhandstring = this.inhand[2].split('').join(' '); //white in-hand pieces, black in-hand pieces\r\n\t\t} else if (this.variant === 'threeCheck') {\r\n\t\t\twinhandstring = 'White checks: ' + ('+'.repeat(this.checks[1]) || '').bold();\r\n\t\t\tbinhandstring = 'Black checks: ' + ('+'.repeat(this.checks[2]) || '').bold();\r\n\t\t}\r\n\t\treturn this.flip ? winhandstring + '\\n' + binhandstring : binhandstring + '\\n' + winhandstring;\r\n\t}\r\n    \r\n\tget lastMove(): string | null {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tget imageURL(): string {\r\n\t\treturn config.url.board.replace('|', '?' + qs.stringify({\r\n\t\t\tfen: this.positionfen,\r\n\t\t\tboard: config.board,\r\n\t\t\tpiece: config.pieces,\r\n\t\t\tcoordinates: config.coords,\r\n\t\t\tsize: config.size, \r\n\t\t\tflip: this.flip ? 1 : 0,\r\n\t\t\text: '.png'\r\n\t\t}));\r\n\t}\r\n\r\n\tget analysisURL(): string { //encode for chess\r\n\t\tlet str = config.url[this.variant];\r\n\t\tif (!str) return config.url.analysis.replace('|', encodeURIComponent(this.fen));\r\n\t\treturn str.replace('|', this.fen.replace(/\\s+/g, '_'));\r\n\t} //as is with modified spaces for variants\r\n\r\n}","import React, { ReactElement } from 'react';\r\nimport FENConstructor from '../utils/fen';\r\nimport styles from '../css/components.module.css';\r\n\r\nexport class FEN extends React.Component<{\r\n\tsrc: string\r\n}> {\r\n\r\n\trender(): ReactElement {\r\n\t\tlet fen = new FENConstructor(this.props.src);\r\n\t\treturn (\r\n\t\t\t<div className={styles.board}>\r\n\t\t\t\t{fen.description}\r\n\t\t\t\t<a href={fen.analysisURL} target='_blank' rel='noopener noreferrer'>\r\n\t\t\t\t\t<img src={fen.imageURL} alt={'fen: ' + fen.positionfen}/>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import he from 'he';\r\nimport { GoogleEvent, GoogleLocation, StringDictionary, ParsedCalendar } from './interfaces';\r\n\r\nconst regexes = {\r\n\tspace: /\\s+/g,\r\n\tfacebook: /(?:(?:http|https):\\/\\/)?(?:www.)?facebook.com\\/(?:events\\/)?(?:[0-9]*\\/)/\r\n};\r\n\r\n\r\nexport default class Event {\r\n\r\n\tlink: string;\r\n\ttitle: string;\r\n\tstatus: string;\r\n\tstart: Date;\r\n\tcreated: Date;\r\n\tend: Date;\r\n\tcalendarID: string;\r\n\tcalendarName: string;\r\n\tcolor: string;\r\n\trawLocation: GoogleLocation | string;\r\n\tlocationReplacers: StringDictionary;\r\n\trawDescription: string;\r\n\tmap: string;\r\n\r\n\tprivate _location: string;\r\n\tprivate _facebookEvent: string;\r\n\tprivate _description: string;\r\n\r\n\tconstructor(parsedCalendar: ParsedCalendar, event: GoogleEvent, {\r\n\t\tlocationReplacers,\r\n\t\tmapsLink\r\n\t}: {\r\n\t\tlocationReplacers: StringDictionary,\r\n\t\tmapsLink: string\r\n\t}) {\r\n\t\tthis.created = new Date(event.created);\r\n\t\tthis.link = event.htmlLink;\r\n\t\tthis.title = event.summary;\r\n\t\tthis.status = event.status;\r\n\t\tthis.start = new Date(event.start.dateTime);\r\n\t\tthis.end = new Date(event.end.dateTime);\r\n\t\tthis.calendarID = parsedCalendar.id;\r\n\t\tthis.calendarName = parsedCalendar.name;\r\n\t\tthis.color = parsedCalendar.color;\r\n\r\n\t\tthis.rawLocation = event.location || '';\r\n\t\tthis.locationReplacers = locationReplacers;\r\n\t\tthis.rawDescription = he.decode(event.description || '');\r\n\t\tthis.map = mapsLink ? mapsLink + this.rawLocation.replace(regexes.space, '+') : '';\r\n\t}\r\n\r\n\tget location(): string {\t\t\r\n\t\tif (this._location) return this._location;\r\n\t\tlet location;\r\n\t\tlet l = this.rawLocation.split(',').shift();\r\n\t\tif (this.locationReplacers[l]) location = this.locationReplacers[l];\r\n\t\telse location = l;\r\n\t\treturn this._location = location;\r\n\t}\r\n\r\n\r\n\tget facebookEvent(): string {\r\n\t\tif (this._facebookEvent) return this._facebookEvent;\r\n\t\tlet facebookEvent = '';\r\n\t\tif (regexes.facebook.test(this.rawDescription)) facebookEvent = this.rawDescription.match(regexes.facebook)[0];\r\n\t\treturn this._facebookEvent = facebookEvent;\r\n\t}\r\n\r\n\tget description(): string {\r\n\t\tif (this._description) return this._description;\r\n\t\tlet description = this.rawDescription;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\tlet start = description.indexOf('<a');\r\n\t\twhile (start !== -1) {\r\n\t\t\tlet end = description.indexOf('/a>') + 3;\r\n\t\t\tdescription = description.slice(0, start) + description.slice(end);\r\n\t\t\tstart = description.indexOf('<a');\r\n\t\t}\r\n\t\tdescription = description.replace(this.facebookEvent, '').trim();\r\n\t\treturn this._description = description;\r\n\t}\r\n}","import React, { ReactElement } from 'react';\r\nimport { StaticContext } from 'react-router';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport * as regexes from '../utils/regexes';\r\nimport Event from './event';\r\nimport axios from '../utils/axios';\r\n\r\nimport { GoogleCalendar, StringDictionary, EventDictionary, CalendarSettings, StyleDictionary, CalendarState, ParsedCalendarDictionary } from './interfaces';\r\nimport { BooleanDeserialise } from '../utils/prototype';\r\n\r\ninterface CalendarProps extends RouteComponentProps<any, StaticContext, any> {\r\n\tsettings: CalendarSettings,\r\n\tstyles: StyleDictionary\r\n}\r\n\r\nexport default class Calendar extends React.Component<CalendarProps, {\r\n\tcalendarIDs: StringDictionary,\r\n\ttoday: number,\r\n\tstart: Date,\r\n\tfinish: Date,\r\n\tcalendars: ParsedCalendarDictionary,\r\n\tweeks: number,\r\n\tevents: EventDictionary,\r\n\tlocationReplacers: StringDictionary,\r\n\tmapsLink: string,\r\n\tdays: string[],\r\n\tmounted: boolean\r\n}> {\r\n\r\n\tconstructor(props: CalendarProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcalendarIDs: {},\r\n\t\t\ttoday: Calendar.getEventDate(Date.now()),\r\n\t\t\tstart: new Date(this.props.settings.start || '6 October 2019'),\r\n\t\t\tfinish: new Date(this.props.settings.finish || '8 December 2019'),\r\n\t\t\tweeks: 8,\r\n\t\t\tcalendars: {},\r\n\t\t\tevents: {},\r\n\t\t\tlocationReplacers: {},\r\n\t\t\tmapsLink: '',\r\n\t\t\tdays: [],\r\n\t\t\tmounted: false\r\n\t\t};\r\n\t}\r\n\r\n\tinterpretProps(props: CalendarProps): CalendarState {\r\n\t\treturn {\r\n\t\t\tcalendarIDs: props.settings.calendarIDs,\r\n\t\t\ttoday: Calendar.getEventDate(Date.now()),\r\n\t\t\tstart: new Date(props.settings.start || '6 October 2019'),\r\n\t\t\tfinish: new Date(props.settings.finish || '8 December 2019'),\r\n\t\t\tcalendars: {},\r\n\t\t\tweeks: props.settings.weeks || 8,\r\n\t\t\tevents: {},\r\n\t\t\tlocationReplacers: props.settings.locationReplacers,\r\n\t\t\tmapsLink: props.settings.mapsLink,\r\n\t\t\tdays: props.settings.days\r\n\t\t};\r\n\t}\r\n\r\n\t//Here we do a complicated process to see if we need to render new events or not\r\n\tcomponentDidUpdate() {\r\n\r\n\t\t//First off, differentiate between oldProps and newProps\r\n\t\tlet prevCalendarIDs = Object.assign({}, this.state.calendarIDs || {}) as StringDictionary;\r\n\t\tlet state = {} as CalendarState;\r\n\r\n\t\t//Second off, if there's any reason to update at all (i.e. if you're received some calendarIDs) then interpret those\r\n\t\t//And make a copy of the state since we can't rely on this.setState to reach this.renderEvents in time\r\n\t\tif (!Object.keys(this.props.settings.calendarIDs).length) return;\r\n\t\tif (Object.keys(prevCalendarIDs).length !== Object.keys(this.props.settings.calendarIDs).length) {\r\n\t\t\tstate = this.interpretProps(this.props);\r\n\t\t\tthis.setState(state);\r\n\t\t};\r\n\t\t\r\n\t\t//Then, make an object identifying the updates\r\n\t\tlet obj = {} as StringDictionary;\r\n\t\tfor (let [k, v] of Object.entries(this.props.settings.calendarIDs)) {\r\n\t\t\tif (prevCalendarIDs[k]) continue;\r\n\t\t\tobj[k] = v;\r\n\t\t}\r\n\t\t\r\n\t\t//Thirdly then, if there are differences, send off those differences to be rendered\r\n\t\tif (!Object.keys(obj).length) return;\r\n\t\tthis.renderEvents(obj, state)\r\n\t\t\t.then(() => {\r\n\t\t\t\tlet now = Date.now();\r\n\t\t\t\tif (state.start.getTime() < now && state.finish.getTime() > now) {\r\n\t\t\t\t\twindow.location = Calendar.setSection(window.location, this.state.today) as unknown as Location;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(console.error);\r\n\t}\r\n\r\n\tstatic setSection(location: Location, id: number): string {\r\n\t\treturn location.href.slice(0, -location.hash.length) + '#' + id.toString();\r\n\t}\r\n\r\n\tstatic getEventDate(date: number | Date | string): number {\r\n\t\tlet obj = new Date(date);\r\n\t\tobj.setHours(0);\r\n\t\tobj.setMinutes(0);\r\n\t\tobj.setSeconds(0);\r\n\t\tobj.setMilliseconds(0);\r\n\t\treturn obj.valueOf() / 1000;\r\n\t}\r\n\r\n\tstatic isDateEqual(date1: Date, date2: Date): boolean {\r\n\t\tif (date1.getFullYear() !== date2.getFullYear()) return false;\r\n\t\tif (date1.getMonth() === date2.getMonth()) return false;\r\n\t\tif (date1.getDate() === date2.getDate()) return false;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tstatic getDisplayTime(date: Date): string {\r\n\t\treturn date.getHours() + ':' + '0'.repeat(2 - date.getMinutes().toString().length) + date.getMinutes();\r\n\t}\r\n\r\n\trenderFrame(): ReactElement {\r\n\t\tlet weeks = [];\r\n\t\tfor (let i = 0; i < this.state.weeks + 1; i++) {\r\n\t\t\tlet curr = new Date(this.state.start);\r\n\t\t\tcurr.setDate(curr.getDate() + 7 * i);\r\n\t\t\tweeks.push(curr);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className={this.props.styles.tableContainer}>\r\n\t\t\t\t<table className={this.props.styles.table}>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t{[this.props.settings.title, ...this.props.settings.days].map((day, i) => {\r\n\t\t\t\t\t\t\t\treturn <th scope='column' key={[day, i].join('.')} className={i ? '' : this.props.styles.firstColumn}>{day}</th>;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\t\t\t\t\t\t\r\n\t\t\t\t\t\t{weeks.map((week, i) => {\r\n\t\t\t\t\t\t\tlet days = [];\r\n\t\t\t\t\t\t\tfor (let i = 0; i < 7; i++) {\r\n\t\t\t\t\t\t\t\tlet date = new Date(new Date(week).setDate(week.getDate() + i));\r\n\t\t\t\t\t\t\t\tlet timestamp = Calendar.getEventDate(date);\r\n\t\t\t\t\t\t\t\tlet today = false;\r\n\t\t\t\t\t\t\t\tif (this.state.today === timestamp) today = true;\r\n\t\t\t\t\t\t\t\tlet day = (\r\n\t\t\t\t\t\t\t\t\t<td id={timestamp.toString()} key={timestamp.toString()} className={today ? this.props.styles.today : this.props.styles.cell}>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t{this.state.events[timestamp] && !Object.values(this.state.events[timestamp]).every(e => !this.state.calendars[e.calendarID].status) ? this.state.events[timestamp]\r\n\t\t\t\t\t\t\t\t\t\t\t\t.sort((a, b) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (a.start.getHours() !== b.start.getHours()) return a.start.getHours() - b.start.getHours();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\telse return a.start.getMinutes() - b.start.getMinutes();\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t.map((event, i) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={this.props.styles.event} key={[timestamp, i].join('.')} style={this.state.calendars[event.calendarID].status ? {} : {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'none'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={this.props.styles.eventHeader}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 className={[this.props.styles.eventName].join(' ')}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={[this.props.styles.status, this.props.styles.toolContainer].join(' ')} style={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: event.color\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>⬤\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={this.props.styles.tooltip}>{event.calendarName}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{event.facebookEvent ? <a className={this.props.styles.eventTitle} href={event.facebookEvent}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{event.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a> : event.title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{Calendar.getDisplayTime(event.start)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{event.map ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href={event.map} rel='noopener noreferrer' target='_blank'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{event.location}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: event.location}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{'\\n'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{event.description || null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t: <div className={this.props.styles.dateNumber}>{date.getDate()}</div>}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tdays.push(day);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn <tr key={'week.' + i}>\r\n\t\t\t\t\t\t\t\t<th scope='row' className={this.props.styles.firstColumn}>\r\n\t\t\t\t\t\t\t\t\t{'Week ' + i + '\\n' + week.toDateString().slice(4, 10)}\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t{days}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</tr>;\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderEvents(calendarIDs: StringDictionary, state: CalendarState): Promise<void[]> {\r\n\t\tlet calendars: ParsedCalendarDictionary = {};\r\n\t\tlet search = this.props.location.search.toString().slice(1) || '';\r\n\t\tlet query = BooleanDeserialise(search);\r\n\t\treturn Promise.all(Object.keys(calendarIDs).map(async (calendarId) => {\r\n\t\t\ttry {\r\n\t\t\t\tlet res = await axios({\r\n\t\t\t\t\tbaseURL: 'https://clients6.google.com/calendar/v3/calendars/',\r\n\t\t\t\t\turl: calendarId + '/events',\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tcalendarId,\r\n\t\t\t\t\t\tsingleEvents: true,\r\n\t\t\t\t\t\ttimeZone: 'Europe/London',\r\n\t\t\t\t\t\tmaxAttendees: 1,\r\n\t\t\t\t\t\tmaxResults: 250,\r\n\t\t\t\t\t\tsanitizeHtml: true,\r\n\t\t\t\t\t\ttimeMin: new Date(state.start).toISOString(), //'2019-10-27T00:00:00Z',\r\n\t\t\t\t\t\ttimeMax: new Date(state.finish).toISOString(), //'2019-12-01T00:00:00Z',\r\n\t\t\t\t\t\tkey: 'AIzaSyDahTZUtTKORUdsOY3H7BEeOXbwye0nBHI' //AIzaSyBNlYH01_9Hc5S1J9vuFmu2nUqBZJNAXxs'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet data = res.data as GoogleCalendar;\r\n\t\t\t\tlet ref = data.summary.match(regexes.letters).join('-').toLowerCase();\r\n\t\t\t\tlet status = (() => {\r\n\t\t\t\t\tif (ref in query) return query[ref];\r\n\t\t\t\t\tif ('all' in query) return query.all;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t})();\r\n\t\t\t\tif (!calendars[calendarId]) calendars[calendarId] = {\r\n\t\t\t\t\tid: calendarId,\r\n\t\t\t\t\tname: data.summary,\r\n\t\t\t\t\tref,\r\n\t\t\t\t\tdescription: data.description || '',\r\n\t\t\t\t\tcolor: calendarIDs[calendarId],\r\n\t\t\t\t\tstatus\r\n\t\t\t\t};\r\n\t\t\t\tlet dates = data.items.map((event) => new Event(calendars[calendarId], event, state));\r\n\t\t\t\tlet events = state.events;\r\n\t\t\t\tdates.forEach((event) => {\r\n\t\t\t\t\tlet date = Calendar.getEventDate(event.start);\r\n\t\t\t\t\tif (!events[date]) events[date] = [];\r\n\t\t\t\t\tevents[date].push(event);\r\n\t\t\t\t});\r\n\t\t\t\tthis.setState({ calendars, events });\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\r\n\tprivate updateColourStatuses = (calendarID: string): void => {\r\n\t\tlet calendars = Object.assign({}, this.state.calendars);\r\n\t\tcalendars[calendarID].status = !calendars[calendarID].status;\r\n\t\tthis.setState({ calendars });\r\n\t}\r\n\r\n\trenderKey(): ReactElement {\r\n\t\tlet sorted = Object.entries(this.state.calendars).sort((a, b) => {\r\n\t\t\tif (a[1].name < b[1].name) return -1;\r\n\t\t\telse if (a[1].name > b[1].name) return 1;\r\n\t\t\telse return 0;\r\n\t\t});\r\n\t\treturn <div className={this.props.styles.key}>\r\n\t\t\t{sorted.map(([calendarID, parsedCalendar], i) => {\r\n\t\t\t\treturn <div className={this.props.styles.key} key={['keyElement', i].join('.')}>\r\n\t\t\t\t\t<span className={[this.props.styles.status, this.props.styles.toolContainer].join(' ')} onClick={() => this.updateColourStatuses(parsedCalendar.id)} style={{\r\n\t\t\t\t\t\tcolor: parsedCalendar.color\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{parsedCalendar.status ? '\\u2b24' : '\\u2b58'}\r\n\t\t\t\t\t\t{!parsedCalendar.description ? null : <span className={[this.props.styles.tooltip].join(' ')}>\r\n\t\t\t\t\t\t\t{parsedCalendar.description}\r\n\t\t\t\t\t\t</span>}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<h4>{'\\u200b ' + parsedCalendar.name}</h4>\r\n\t\t\t\t</div>;\r\n\t\t\t})}\r\n\t\t</div>;\r\n\t}\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<div className={this.props.styles.container}>\r\n\t\t\t\t{this.renderKey()}\r\n\t\t\t\t{this.renderFrame()}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React, { ReactElement } from 'react';\r\nimport axios from '../utils/axios';\r\nimport Calendar from '../Calendar';\r\nimport { CalendarSettings, StringDictionary } from '../Calendar/interfaces';\r\nimport { CalendarProps } from '../pages/interfaces';\r\n\r\nexport default class Header extends React.Component<CalendarProps, {\r\n\tstyles: StringDictionary,\r\n\tsettings: CalendarSettings\r\n}> {\r\n\r\n\tstate = {\r\n\t\tstyles: (() => {\r\n\t\t\ttry {\r\n\t\t\t\treturn require('../css/' + this.props.styles) as StringDictionary;\r\n\t\t\t} catch (e) {\r\n\t\t\t\treturn {} as StringDictionary;\r\n\t\t\t}\r\n\t\t})(),\r\n\t\tsettings: {\r\n\t\t\tcalendarIDs: {} as StringDictionary,\r\n\t\t\tmapsLink: '',\r\n\t\t\tlocationReplacers: {} as StringDictionary,\r\n\t\t\tstart: this.props.start,\r\n\t\t\tfinish: this.props.finish,\r\n\t\t\tweeks: parseInt(this.props.weeks),\r\n\t\t\ttitle: this.props.title,\r\n\t\t\tdays: []\r\n\t\t} as CalendarSettings\r\n\t}\r\n\r\n\tgetSettings(url: string): Promise<any> {\r\n\t\tif (!url) return Promise.reject();\r\n\t\treturn axios({\r\n\t\t\tbaseURL: 'https://oxfordunichess.github.io/oucc-backend/',\r\n\t\t\turl,\r\n\t\t\tparams: {\r\n\t\t\t\tsessionID: this.props.sessionID\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => res.data)\r\n\t\t\t.catch(console.error);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getSettings(this.props.settings)\r\n\t\t\t.then((settings) => this.setState({settings: Object.assign(this.state.settings, settings)}))\r\n\t\t\t.catch(() => {})\r\n\t}\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<Calendar {...this.props} settings={this.state.settings} styles={this.state.styles}/>\r\n\t\t);\r\n\t}\r\n\r\n}","import React, { ReactElement, RefObject } from 'react';\r\nimport styles from '../css/components.module.css';\r\n\r\nexport interface FormProps {\r\n\taction: string\r\n\tmethod: 'POST' | 'GET'\r\n\tfields: string\r\n\tsubmit: string\r\n\treset?: string\r\n}\r\n\r\nexport default class Form extends React.Component<FormProps> {\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<form className={styles.contactForm} method={this.props.method} action={this.props.action}>\r\n\t\t\t\t<table className={styles.contactTable}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{this.props.fields.split('\\\\n').map(line => line.split(',')).map(([k, v], i) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<tr key={[k, i].join('.')}>\r\n\t\t\t\t\t\t\t\t\t<th>{v + ':'}</th>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tk !== 'message' ?\r\n\t\t\t\t\t\t\t\t\t\t\t<input className={styles.input} type='text' name={k} size={55}/> :\r\n\t\t\t\t\t\t\t\t\t\t\t<textarea className={styles.textarea} name='message' rows={6}/>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<input type='submit' name='Submit' value={this.props.submit}/>\r\n\t\t\t\t{this.props.reset ? <input type='reset' value={this.props.reset}/> : null}\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\ninterface Doc extends Document {\r\n    exitFullscreen: any;\r\n    mozCancelFullScreen: any;\r\n    webkitExitFullscreen: any;\r\n    fullscreenElement: any;\r\n    mozFullScreenElement: any;\r\n\twebkitFullscreenElement: any;\r\n\tmsExitFullscreen: any;\r\n}\r\n\r\nexport interface JotFormProps {\r\n\tid: string\r\n\ttitle: string\r\n\tsrc: string\r\n\tstyle?: string\r\n}\r\n\r\nexport class Jotform extends React.Component<JotFormProps> {\r\n\r\n\tprivate iframe: RefObject<HTMLIFrameElement>;\r\n\tprivate container: RefObject<HTMLDivElement>;\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet handleIFrameMessage = (e: MessageEvent) => {\r\n\t\t\tif (typeof e.data === 'object') return;\r\n\t\t\tvar args = e.data.split(\":\");\r\n\t\t\tlet iframe = this.iframe ? this.iframe.current : null;\r\n\t\t\tif (!iframe) return;\r\n\t\t\tswitch (args[0]) {\r\n\t\t\t\tcase \"scrollIntoView\":\r\n\t\t\t\t\tiframe.scrollIntoView();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"setHeight\":\r\n\t\t\t\t\tiframe.style.height = args[1] + \"px\";\r\n\t\t\t\t\tif (this.container && this.container.current) this.container.current.style.height = (Number(args[1]) - 48) + 'px';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"collapseErrorPage\":\r\n\t\t\t\t\tif (iframe.clientHeight > window.innerHeight) {\r\n\t\t\t\t\t\tiframe.style.height = window.innerHeight + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"reloadPage\":\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"loadScript\":\r\n\t\t\t\t\tvar src = args[1];\r\n\t\t\t\t\tif (args.length > 3) {\r\n\t\t\t\t\t\tsrc = args[1] + ':' + args[2];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar script = document.createElement('script');\r\n\t\t\t\t\tscript.src = src;\r\n\t\t\t\t\tscript.type = 'text/javascript';\r\n\t\t\t\t\tdocument.body.appendChild(script);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"exitFullscreen\":\r\n\t\t\t\t\tlet doc = window.document as Doc;\r\n\t\t\t\t\tif (doc.exitFullscreen) doc.exitFullscreen();\r\n\t\t\t\t\telse if (doc.mozCancelFullScreen) doc.mozCancelFullScreen();\r\n\t\t\t\t\telse if (doc.webkitExitFullscreen) doc.webkitExitFullscreen();\r\n\t\t\t\t\telse if (doc.msExitFullscreen) doc.msExitFullscreen();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar isJotForm = (e.origin.indexOf(\"jotform\") > -1) ? true : false;\r\n\t\t\tif (isJotForm && \"contentWindow\" in iframe && \"postMessage\" in iframe.contentWindow) {\r\n\t\t\t\tvar urls = {\r\n\t\t\t\t\t\"docurl\": encodeURIComponent(document.URL),\r\n\t\t\t\t\t\"referrer\": encodeURIComponent(document.referrer)\r\n\t\t\t\t};\r\n\t\t\t\tiframe.contentWindow.postMessage(JSON.stringify({\r\n\t\t\t\t\t\"type\": \"urls\",\r\n\t\t\t\t\t\"value\": urls\r\n\t\t\t\t}), \"*\");\r\n\t\t\t}\r\n\t\t};\r\n\t\twindow.addEventListener(\"message\", handleIFrameMessage, false);\r\n\t}\r\n\r\n\tinterpretStyle(style: string): {[key: string]: string} {\r\n\t\treturn style.split('\\n').map(line => line.split(': ')).reduce((acc, [k, v]) => {\r\n\t\t\tacc[k] = v;\r\n\t\t\treturn acc;\r\n\t\t}, {} as {[key: string]: string});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet style = this.interpretStyle(this.props.style || '');\r\n\t\treturn (\r\n\t\t\t<div className={styles.jotform} ref={this.container} style={{\r\n\t\t\t\theight: '491px'\r\n\t\t\t}}>\r\n\t\t\t\t<iframe\r\n\t\t\t\t\tref={this.iframe}\r\n\t\t\t\t\ttitle={this.props.title}\r\n\t\t\t\t\tonLoad={() => window.parent.scrollTo(0, 0)}\r\n\t\t\t\t\tallowTransparency={true}\r\n\t\t\t\t\tallowFullScreen={true}\r\n\t\t\t\t\tallow=\"geolocation; microphone; camera\"\r\n\t\t\t\t\tsrc={this.props.src}\r\n\t\t\t\t\tframeBorder={0}\r\n\t\t\t\t\tstyle={Object.assign({\r\n\t\t\t\t\t\tminWidth: '100%',\r\n\t\t\t\t\t\theight: '539px',\r\n\t\t\t\t\t\tborder: 'none'\r\n\t\t\t\t\t}, style)}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React, { useState, useCallback } from 'react';\r\nimport { Carousel as RRC } from 'react-responsive-carousel';\r\nimport 'react-responsive-carousel/lib/styles/carousel.min.css';\r\nimport Gallery from 'react-photo-gallery';\r\nimport Lightbox, { Modal, ModalGateway } from 'react-images';\r\nimport { PhotoProps } from 'react-photo-gallery';\r\nimport styles from '../css/components.module.css';\r\nimport axios, { server } from '../utils/axios';\r\nimport url from 'url';\r\nimport { imageExt } from '../utils/regexes';\r\n\r\nexport default function Album(props: AlbumProps) {\r\n\r\n\tconst ratio = props.ratio.split(',').map(v => parseInt(v));\r\n\r\n\tconst [currentImage, setCurrentImage] = useState(0);\r\n\tconst [viewerIsOpen, setViewerIsOpen] = useState(false);\r\n\tconst [photos, setPhotos] = useState(props.photos ? props.photos.split(',').map((src: string, index: number) => {\r\n\t\tlet filename = src.split('/').pop() as string;\r\n\t\tlet extension = filename.split('.').pop() as string;\r\n\t\tlet text = filename.slice(0, filename.length - extension.length - 1);\r\n\t\tlet [name, customRatioSrc] = text.split('_');\r\n\t\tlet customRatio = customRatioSrc ? customRatioSrc.split('.').map(v => parseInt(v)) : ratio;\r\n\t\treturn {\r\n\t\t\tindex,\r\n\t\t\tsource: url.resolve(server, src),\r\n\t\t\tsrc: url.resolve(server, src),\r\n\t\t\tsrcSet: url.resolve(server, src),\r\n\t\t\twidth: customRatio[0],\r\n\t\t\theight: customRatio[1],\r\n\t\t\ttitle: name\r\n\t\t};\r\n\t}) as Image[] : [] as Image[]);\r\n\r\n\tconst openLightbox = useCallback((event, { photo, index }) => {\r\n\t\tsetCurrentImage(index);\r\n\t\tsetViewerIsOpen(true);\r\n\t}, []);\r\n\r\n\tconst closeLightbox = () => {\r\n\t\tsetCurrentImage(0);\r\n\t\tsetViewerIsOpen(false);\r\n\t};\r\n\tif (!photos.length) {\r\n\t\tif (props.src) {\r\n\t\t\taxios({\r\n\t\t\t\tbaseURL: 'https://api.github.com/repos/oxfordunichess/oucc-backend/contents/',\r\n\t\t\t\turl: url.resolve('pages/', props.src),\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\tmaxRedirects: 5\r\n\t\t\t})\r\n\t\t\t\t.then(res => res.data)\r\n\t\t\t\t.then((data) => {\r\n\t\t\t\t\treturn data.map((entry: GithubContentData, index: number) => {\r\n\t\t\t\t\t\tlet filename = entry.path.split('/').pop() as string;\r\n\t\t\t\t\t\tlet extension = filename.split('.').pop() as string;\r\n\t\t\t\t\t\tif (!imageExt.test(extension)) return null;\r\n\t\t\t\t\t\tlet text = filename.slice(0, filename.length - extension.length - 1);\r\n\t\t\t\t\t\tlet [name, customRatioSrc] = text.split('_');\r\n\t\t\t\t\t\tlet customRatio = ratio;\r\n\t\t\t\t\t\tif (customRatioSrc) {\r\n\t\t\t\t\t\t\tif (customRatioSrc.split('.').length === 2) customRatio = customRatioSrc.split('.').map(v => parseInt(v)) as [number, number];\r\n\t\t\t\t\t\t\telse if (customRatioSrc && customRatioSrc.split(',').length === 2) customRatio = customRatioSrc.split(',').map(v => parseInt(v)) as [number, number];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\tsrc: url.resolve(server, entry.path),\r\n\t\t\t\t\t\t\tsrcSet: url.resolve(server, entry.path),\r\n\t\t\t\t\t\t\twidth: customRatio[0],\r\n\t\t\t\t\t\t\theight: customRatio[1],\r\n\t\t\t\t\t\t\ttitle: name\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}).filter((v: Object | null) => v);\r\n\t\t\t\t})\r\n\t\t\t\t.then(setPhotos)\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={props.type === 'grid' ? styles.grid : styles.carousel}\r\n\t\t>\r\n\t\t\t{!photos.length ? null : props.type === 'grid' ?\r\n\t\t\t\t<Gallery\t// Grid\r\n\t\t\t\t\tphotos={photos}\r\n\t\t\t\t\tonClick={props.enableLightbox !== false ? openLightbox : () => {}}\r\n\t\t\t\t\tmargin={props.margin || 2}\r\n\t\t\t\t\tcolumns={3}\r\n\t\t\t\t\ttargetRowHeight={props.height || 200}\r\n\t\t\t\t/> :\r\n\t\t\t\t<RRC\t\t//React-Reponsive-Carousel\r\n\t\t\t\t\tonClickItem={props.enableLightbox !== false ? openLightbox : () => {}}\r\n\t\t\t\t\tinfiniteLoop={true}\r\n\t\t\t\t\tuseKeyboardArrows={true}\r\n\t\t\t\t\tshowStatus={false}\r\n\t\t\t\t\temulateTouch={true}\r\n\t\t\t\t\taxis={props.axis || 'horizontal'}\r\n\t\t\t\t\tautoPlay={props.autoPlay !== false}\r\n\t\t\t\t\twidth={'100%'}\r\n\t\t\t\t\tselectedItem={props.selectedItem || 0}\r\n\t\t\t\t\tshowThumbs={props.showThumbs !== false}\r\n\t\t\t\t\tinterval={props.interval || 4000}\r\n\t\t\t\t\ttransitionTime={props.transitionTime || 500}\r\n\t\t\t\t\tcenterMode={props.centerMode || false}\r\n\t\t\t\t\tdynamicHeight={props.dynamicHeight || true}\r\n\t\t\t\t>\r\n\t\t\t\t\t{photos.map((x, i) => {\r\n\t\t\t\t\t\tif (!x) return null;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div key={x.src + '.' + i.toString()}>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={x.src}\r\n\t\t\t\t\t\t\t\t\talt={x.alt}\r\n\t\t\t\t\t\t\t\t></img>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</RRC>\r\n\t\t\t}\r\n\t\t\t{props.enableLightbox !== false ? (\r\n\t\t\t\t<ModalGateway>\r\n\t\t\t\t\t{!viewerIsOpen ?  null : (\r\n\t\t\t\t\t\t<Modal onClose={closeLightbox}>\r\n\t\t\t\t\t\t\t<Lightbox\r\n\t\t\t\t\t\t\t\tcurrentIndex={currentImage}\r\n\t\t\t\t\t\t\t\tviews={photos.map(x => ({\r\n\t\t\t\t\t\t\t\t\t...x,\r\n\t\t\t\t\t\t\t\t\tcaption: x.title\r\n\t\t\t\t\t\t\t\t}))}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ModalGateway>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\ninterface Image {\r\n\tsource: string\r\n\tsrc: string\r\n\ttitle: string\r\n\twidth: number\r\n\theight: number\r\n\talt?: string\r\n}\r\n\r\nexport interface AlbumProps extends PhotoProps {\r\n\ttype: 'carousel' | 'grid'\r\n\tenableLightbox: boolean\r\n\r\n\tphotos?: string\r\n\tsrc: string,\r\n\taxis?: 'vertical' | 'horizontal',\r\n\tautoPlay?: boolean\r\n\tselectedItem?: number\r\n\tshowThumbs?: boolean\r\n\tinterval?: number\r\n\ttransitionTime?: number\r\n\tcenterMode?: boolean\r\n\tdynamicHeight?: boolean\r\n\r\n\tmargin?: number\r\n\ttargetRowHeight?: number\r\n\tratio?: string\r\n}\r\n\r\ninterface GithubContentData {\r\n\tname: string\r\n\tpath: string\r\n\tsha: string\r\n\tsize: number\r\n\turl: string\r\n\thtml_url: string\r\n\tgit_url: string\r\n\tdownload_url: string\r\n\ttype: 'file'\r\n\t_links: {\r\n\t\tself: string,\r\n\t\tgit: string,\r\n\t\thtml: string\r\n\t},\r\n\twidth: number\r\n\theight: number\r\n}","\r\nimport React, { ReactElement } from 'react';\r\n\r\nimport Profile from '../components/Profile';\r\nimport Table from '../components/Table';\r\nimport { FEN } from '../components/Chess';\r\nimport Calendar from '../components/Calendar';\r\nimport Form, { FormProps, Jotform, JotFormProps } from '../components/Form';\r\nimport { ProfileProps, parseHTMLElement, CalendarProps, htmlParser as def } from '../pages/interfaces';\r\nimport { StaticContext } from 'react-router';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport Album, { AlbumProps } from '../components/Image';\r\n\r\nconst htmlParser: def = require('react-markdown/plugins/html-parser');\r\nconst HtmlToReact = require('html-to-react');\r\n\r\n// See https://github.com/aknuds1/html-to-react#with-custom-processing-instructions\r\n// for more info on the processing instructions\r\nconst processNodeDefinitions = new HtmlToReact.ProcessNodeDefinitions(React);\r\nexport function parseHtml(props?: RouteComponentProps<any, StaticContext, any>, sessionID?: string, setWide?: () => void) {\r\n\treturn htmlParser({\r\n\t\tisValidNode: (node: parseHTMLElement) => node.type !== 'script',\r\n\t\tprocessingInstructions: [\r\n\t\t\t{\r\n\t\t\t\t// Custom album processing\r\n\t\t\t\tshouldProcessNode: function (node: parseHTMLElement): boolean {\r\n\t\t\t\t\tif (node.name === 'grid') return true;\r\n\t\t\t\t\tif (node.name === 'carousel') return true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tprocessNode: function (node: parseHTMLElement, children: parseHTMLElement[]): ReactElement {\r\n\t\t\t\t\treturn <Album {...node.attribs as AlbumProps} type={node.name as 'grid' | 'carousel'} />;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// Custom <Table> processing\r\n\t\t\t\tshouldProcessNode: function (node: parseHTMLElement): boolean {\r\n\t\t\t\t\treturn node.name === 'data-table';\r\n\t\t\t\t},\r\n\t\t\t\tprocessNode: function (node: parseHTMLElement, children: parseHTMLElement[]): ReactElement {\r\n\t\t\t\t\treturn <Table {...node.attribs as {src: string}} sessionID={sessionID || undefined}/>;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// Custom <Calendar> processing\r\n\t\t\t\tshouldProcessNode: function (node: parseHTMLElement): boolean {\r\n\t\t\t\t\treturn node.name === 'calendar';\r\n\t\t\t\t},\r\n\t\t\t\tprocessNode: function (node: parseHTMLElement, children: parseHTMLElement[]): ReactElement {\r\n\t\t\t\t\tif (setWide) setWide();\r\n\t\t\t\t\treturn <Calendar {...Object.assign({}, props, node.attribs) as CalendarProps} sessionID={sessionID || undefined}/>;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// Custom <Profile> processing\r\n\t\t\t\tshouldProcessNode:(node: parseHTMLElement): boolean => {\r\n\t\t\t\t\treturn node.name === 'profile';\r\n\t\t\t\t},\r\n\t\t\t\tprocessNode: (node: parseHTMLElement, children: parseHTMLElement[]): ReactElement => {\r\n\t\t\t\t\treturn <Profile {...node.attribs as ProfileProps}/>;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// Custom <Form> processing\r\n\t\t\t\tshouldProcessNode:(node: parseHTMLElement): boolean => {\r\n\t\t\t\t\treturn node.name === 'form';\r\n\t\t\t\t},\r\n\t\t\t\tprocessNode: (node: parseHTMLElement, children: parseHTMLElement[]): ReactElement => {\r\n\t\t\t\t\treturn <Form {...node.attribs as FormProps}/>;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// Custom <Jotform> processing\r\n\t\t\t\tshouldProcessNode:(node: parseHTMLElement): boolean => {\r\n\t\t\t\t\treturn node.name === 'jotform';\r\n\t\t\t\t},\r\n\t\t\t\tprocessNode: (node: parseHTMLElement, children: parseHTMLElement[]): ReactElement => {\r\n\t\t\t\t\treturn <Jotform {...node.attribs as JotFormProps}/>;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// Custom <FEN> processing\r\n\t\t\t\tshouldProcessNode:(node: parseHTMLElement): boolean => {\r\n\t\t\t\t\treturn node.name === 'fen';\r\n\t\t\t\t},\r\n\t\t\t\tprocessNode: (node: parseHTMLElement, children: parseHTMLElement[]): ReactElement => {\r\n\t\t\t\t\treturn <FEN {...node.attribs as {src: string}}/>;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t// Anything else\r\n\t\t\t\tshouldProcessNode: function (node: parseHTMLElement): boolean {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t},\r\n\t\t\t\tprocessNode: processNodeDefinitions.processDefaultNode as (node: Node, children: Node[]) => ReactElement\r\n\t\t\t}\r\n\t\t]\r\n\t});\r\n}","import * as regexes from './regexes';\r\n\r\nexport function isDev(): boolean {\r\n\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n\t\treturn true;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport function isMobile(): boolean {\r\n\tlet str: string = navigator.userAgent || navigator.vendor || '';\r\n\tif (regexes.mobile[0].test(str)) return true;\r\n\tif (regexes.mobile[1].test(str.substr(0, 4))) return true;\r\n\treturn false;\r\n}\r\n\r\nexport function isVisible(elem: HTMLElement): boolean {\r\n    if (!(elem instanceof Element)) throw Error('DomUtil: elem is not an element.');\r\n    const style = getComputedStyle(elem);\r\n    if (style.display === 'none') return false;\r\n    if (style.visibility !== 'visible') return false;\r\n    if (style.opacity && Number(style.opacity) < 0.1) return false;\r\n    if (elem.offsetWidth + elem.offsetHeight + elem.getBoundingClientRect().height +\r\n        elem.getBoundingClientRect().width === 0) {\r\n        return false;\r\n    }\r\n    const elemCenter   = {\r\n        x: elem.getBoundingClientRect().left + elem.offsetWidth / 2,\r\n        y: elem.getBoundingClientRect().top + elem.offsetHeight / 2\r\n    };\r\n    if (elemCenter.x < 0) return false;\r\n    if (elemCenter.x > (document.documentElement.clientWidth || window.innerWidth)) return false;\r\n    if (elemCenter.y < 0) return false;\r\n    if (elemCenter.y > (document.documentElement.clientHeight || window.innerHeight)) return false;\r\n    let pointContainer = document.elementFromPoint(elemCenter.x, elemCenter.y);\r\n    do {\r\n\t\tif (pointContainer === elem) return true;\r\n\t/* eslint-disable-next-line no-cond-assign */\r\n    } while (pointContainer = (pointContainer || {}).parentNode as Element);\r\n    return false;\r\n}","import React, { ReactElement } from 'react';\r\nimport { facebook, mail } from '../utils/thumbnails';\r\nimport styles from '../css/footer.module.css';\r\n\r\nexport default class Footer extends React.Component {\r\n\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<div className={styles.footer}>\r\n\t\t\t\t<a className={styles.link} href='https://www.facebook.com/oxfordunichess/' target='_blank' rel='noopener noreferrer'>\r\n\t\t\t\t\t<img src={facebook} alt='Facebook Page' className={styles.image}/>\r\n\t\t\t\t</a>\r\n\t\t\t\t<a className={styles.link} href='https://www.facebook.com/groups/oxford.chess.club/' target='_blank' rel='noopener noreferrer'>\r\n\t\t\t\t\t<img src={facebook} alt='Facebook Group' className={styles.image}/>\r\n\t\t\t\t</a>\r\n\t\t\t\t<a className={styles.link} href='https://mailchi.mp/e4bab2111329/oxfordunichess' target='_blank' rel='noopener noreferrer'>\r\n\t\t\t\t\t<img src={mail} alt='Mailing List' className={styles.image}/>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}","import React, { useCallback, useContext, useEffect, useReducer, useState } from 'react';\r\nimport Markdown from 'react-markdown';\r\nimport {Helmet} from 'react-helmet';\r\nimport url from 'url';\r\n\r\nimport {RouterLink} from '../utils/components';\r\nimport axios, { server } from '../utils/axios';\r\nimport { parseHtml } from '../utils/plugins';\r\nimport { SessionContext } from '../utils/contexts';\r\nimport { StaticContext } from 'react-router';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport { isMobile } from '../utils/auth';\r\nimport Footer from '../components/Footer';\r\n\r\nconst styles = require('../css/page.module.css');\r\n\r\nasync function getPage(path: string = 'main', sessionID?: string) {\r\n\ttry {\r\n\t\tlet url = `pages/${path + '.md'}`;\r\n\t\tlet req = await axios({\r\n\t\t\turl,\r\n\t\t\tparams: { sessionID }\r\n\t\t});\r\n\t\treturn req.data;\r\n\t} catch (e) {\r\n\t\tconsole.error(e);\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\ninterface PageProps extends RouteComponentProps<any, StaticContext, any> {\r\n\ttitle?: string\r\n\tdescription?: string\r\n\tpage: string\r\n}\r\n\r\nexport default function Page(props: PageProps) {\r\n\r\n\tconst [page, setPage] = useState('');\r\n\tconst [wide, setWide] = useReducer((s: boolean, a: boolean) => a ?? true, false) as [boolean, (a?: boolean) => void];\r\n\tconst session = useContext(SessionContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!props.page) return;\r\n\t\tgetPage(props.page, session)\r\n\t\t\t.then((p: string) => {\r\n\t\t\t\tif (!p) return;\r\n\t\t\t\tlet wide = false;\r\n\t\t\t\tif (p.toLowerCase().includes('<calendar')) wide = true;\r\n\t\t\t\tsetPage(p);\r\n\t\t\t\tsetWide(wide);\r\n\t\t\t});\r\n\t}, [props.page, setPage, setWide]);\r\n\r\n\tconst sections = page.trim().split('\\n---\\n');\r\n\r\n\tconst title = props.title ? props.title + ' | OUCC' : 'OUCC';\r\n\tdocument.title = title;\r\n\tlet description = document.querySelector('meta[name=\"description\"]');\r\n\tif (props.description) description.setAttribute('content', props.description);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Helmet>\r\n\t\t\t\t<title>{title}</title>\r\n\t\t\t</Helmet>\r\n\t\t\t<div className={[styles.page, isMobile() ? styles.mobilePage : ''].join(' ')}>\r\n\t\t\t\t<div className={[styles.main, isMobile() ? styles.mobileMain : ''].join(' ')}>\r\n\t\t\t\t\t{sections.map((section, i) => {\r\n\t\t\t\t\t\treturn <div\r\n\t\t\t\t\t\t\tkey={['section', i].join('.')}\r\n\t\t\t\t\t\t\tclassName={[\r\n\t\t\t\t\t\t\t\tstyles.section,\r\n\t\t\t\t\t\t\t\twide ? styles.wide : '',\r\n\t\t\t\t\t\t\t\tisMobile() ? styles.mobileSection : ''\r\n\t\t\t\t\t\t\t].join(' ')}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Markdown\r\n\t\t\t\t\t\t\t\tsource={section.trim()}\r\n\t\t\t\t\t\t\t\tescapeHtml={false}\r\n\t\t\t\t\t\t\t\tastPlugins={[parseHtml(props, session, setWide)]}\r\n\t\t\t\t\t\t\t\trenderers={{\r\n\t\t\t\t\t\t\t\t\tlink: RouterLink\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttransformImageUri={(uri) => {\r\n\t\t\t\t\t\t\t\t\tif (uri.startsWith('.') || uri.startsWith('/')) uri = url.resolve(server + 'data/', uri);\r\n\t\t\t\t\t\t\t\t\treturn uri;\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>;\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<Footer />\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}","import React, { ReactElement } from 'react';\r\nimport Markdown from 'react-markdown';\r\nimport { Helmet } from 'react-helmet';\r\nimport url from 'url';\r\nimport { StaticContext } from 'react-router';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\n\r\nimport { Article } from '../interfaces';\r\nimport { RouterLink } from '../utils/components';\r\nimport { parseHtml } from '../utils/plugins';\r\nimport * as regexes from '../utils/regexes';\r\nimport { SessionContext } from '../utils/contexts';\r\nimport { server } from '../utils/axios';\r\nimport { isMobile } from '../utils/auth';\r\n\r\nimport styles from '../css/page.module.css';\r\nimport Footer from '../components/Footer';\r\n\r\ninterface NewsProps extends RouteComponentProps<any, StaticContext, any> {\r\n\ttitle: string\r\n\tarticles: string[]\r\n};\r\n\r\nexport default class News extends React.Component<NewsProps, {\r\n\tmounted: boolean\r\n\twide: boolean\r\n}> {\r\n\r\n\tstatic contextType = SessionContext;\r\n\tpublic context: React.ContextType<typeof SessionContext>;\r\n\t\r\n\tpublic state = {\r\n\t\tmounted: false,\r\n\t\twide: false\r\n\t}\r\n\r\n\tstatic setSection(location: Location, id: string): string {\r\n\t\treturn location.href.slice(0, -location.hash.length) + '#' + id;\r\n\t}\r\n\r\n\tcomponentDidUpdate(): void {\r\n\t\tif (this.state.mounted) return;\r\n\t\tif (this.props.articles.length) {\r\n\t\t\tif (window.location.hash) {\r\n\t\t\t\twindow.location = window.location.toString().slice(0) as unknown as Location;\r\n\t\t\t\tthis.setState({mounted: true});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender(): ReactElement {\r\n\t\tlet articles = new Map();\r\n\t\tlet components = this.props.articles.map((text) => {\r\n\t\t\tif (typeof text !== 'string') return null;\r\n\t\t\tif (!text) {\r\n\t\t\t\tconsole.error('Bad Markdown document:\\n' + text);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tlet lines = text.split('\\n');\r\n\t\t\tlet header = lines.shift().trim();\r\n\t\t\twhile (header.startsWith('#')) {\r\n\t\t\t\theader = header.slice(1);\r\n\t\t\t}\r\n\t\t\theader = header.trim();\r\n\t\t\tlet id = header.match(regexes.letters).join('-').toLowerCase();\r\n\t\t\tlet intro = `## [${header}](${News.setSection(window.location, id)})`;\r\n\t\t\tlet joined = [intro, ...lines].join('\\n');\r\n\t\t\tarticles.set(id, {\r\n\t\t\t\ttitle: header + ' | OUCC',\r\n\t\t\t\timage: (joined.match(regexes.image) || [])[1],\r\n\t\t\t\tdescription: lines.find(line => line.trim() && !line.trim().startsWith('#'))\r\n\t\t\t});\r\n\t\t\treturn (\r\n\t\t\t\t<div\t\t\t\t\r\n\t\t\t\t\tid={id}\r\n\t\t\t\t\tkey={id}\r\n\t\t\t\t\tclassName={[\r\n\t\t\t\t\t\tstyles.section,\r\n\t\t\t\t\t\tthis.state.wide ? styles.wide : '',\r\n\t\t\t\t\t\tisMobile() ? styles.mobileSection : ''\r\n\t\t\t\t\t].join(' ')}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Markdown\r\n\t\t\t\t\t\tsource={joined}\r\n\t\t\t\t\t\tescapeHtml={false}\r\n\t\t\t\t\t\tastPlugins={[parseHtml(this.props, this.context)]}\r\n\t\t\t\t\t\trenderers={{\r\n\t\t\t\t\t\t\tlink: RouterLink\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttransformImageUri={(uri) => {\r\n\t\t\t\t\t\t\tif (uri.startsWith('.') || uri.startsWith('/')) uri = url.resolve(server + 'data/', uri);\r\n\t\t\t\t\t\t\treturn uri;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\t\tlet data = {} as Article;\r\n\t\tif (window.location.hash && articles.get(window.location.hash.slice(1))) {\r\n\t\t\tdata = articles.get(window.location.hash.slice(1));\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Helmet defaultTitle={this.props.title ? this.props.title + ' | OUCC' : 'OUCC'}>\r\n\t\t\t\t\t<title>{data.title}</title>\r\n\t\t\t\t\t<meta property='og:type' content='article' />\r\n\t\t\t\t\t{data.description ? <meta name='description' content={data.description} /> : null}\r\n\t\t\t\t\t{data.image ? <meta property='og:image' content={data.image} /> : null}\r\n\t\t\t\t</Helmet>\r\n\t\t\t\t<div className={[styles.page, isMobile() ? styles.mobilePage : ''].join(' ')}>\r\n\t\t\t\t\t<div className={[styles.main, isMobile() ? styles.mobileMain : ''].join(' ')}>\r\n\t\t\t\t\t\t{components}\r\n\t\t\t\t\t\t<Footer />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}","import React, {ReactElement} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Helmet} from 'react-helmet';\r\nimport Footer from '../components/Footer';\r\n\r\nexport default class NotFound extends React.Component<{\r\n\ttitle: string\r\n}> {\r\n\t\r\n\trender(): ReactElement {\r\n\t\treturn (\r\n\t\t\t<>\t\t\t\t\r\n\t\t\t\t<Helmet>\r\n\t\t\t\t\t<title>{this.props.title ? this.props.title + ' | OUCC' : 'OUCC'}</title>\r\n\t\t\t\t</Helmet>\r\n\t\t\t\t<div id='main'>\r\n\t\t\t\t\t<h1>404: Not found</h1>\r\n\t\t\t\t\t<h3><Link to='/'>Return to home</Link></h3>\r\n\t\t\t\t</div>\t\t\t\t\r\n\t\t\t\t<Footer />\t\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}","import React, { ReactElement } from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport Footer from '../components/Footer';\r\n\r\n//import simpleOauth from 'simple-oauth2';\r\n//import lichess from 'lichess';\r\nimport { isDev, isMobile } from '../utils/auth';\r\nimport axios from '../utils/axios';\r\n//import * as config from './config';\r\n\r\nimport styles from '../css/page.module.css';\r\n\r\ninterface Token {\r\n\tscopes: string\r\n\ttoken_type: string\r\n\texpires_in: number\r\n\taccess_token: string\r\n\trefresh_token: string\r\n\texpires_at: string\r\n}\r\n\r\n/**\r\n * https://oauth.lichess.org/oauth/authorize?response_type=code&client_id=5vJ1ikA0qNR21fk7&redirect_uri=http://localhost:3000/callback/lichess&scope=team:write&state=aloysius.lip@chch.ox.ac.uk\r\n * https://oauth.lichess.org/oauth/authorize?response_type=code&client_id=LwK306sbKWFHIzlV&redirect_uri=http://users.ox.ac.uk/~chess/callback/lichess&scope=team:write&state=aloysius.lip@chch.ox.ac.uk;\r\n * */\r\n/*\r\nconst oauth2 = simpleOauth.create({\r\n\tclient: {\r\n\t\tid: config.lichess.id,\r\n\t\tsecret: config.lichess.secret,\r\n\t},\r\n\tauth: {\r\n\t\ttokenHost: config.lichess.tokenHost,\r\n\t\ttokenPath: config.lichess.tokenPath,\r\n\t\tauthorizePath: config.lichess.authorizePath,\r\n\t},\r\n});\r\n*/\r\nexport default class Auth extends React.Component<{\r\n\tmatch: {\r\n\t\tparams: {\r\n\t\t\tservice: 'lichess' | 'chesscom' | 'fide' | 'ecf'\r\n\t\t}\r\n\t},\r\n\tlocation: {\r\n\t\tsearch: string\r\n\t}\r\n}, {\r\n\tsuccess: boolean | undefined\r\n}> {\r\n\r\n\tpublic state = {\r\n\t\tsuccess: undefined as boolean | undefined\r\n\t}\r\n\r\n\r\n\tasync verify(code: string, service: 'lichess'): Promise<void> {\r\n\t\ttry {\r\n\t\t\t/*\r\n\t\t\tconst result = await oauth2.authorizationCode.getToken({\r\n\t\t\t\tcode,\r\n\t\t\t\tredirect_uri: config[service].redirectUri\r\n\t\t\t});\t\t\t\r\n\t\t\tconst access = oauth2.accessToken.create(result); */ // Tradition OAuth doesn't work due to CORS restrictions with lichess\r\n\t\t\tlet { data } = await axios.get('https://simple-lichess-keygen.glitch.me/gen?code=' + code + '&dev=' + (isDev() ? 'true' : 'false')) as { data: Token };\r\n\t\t\t\r\n\t\t\tif (!data.access_token) throw data;\r\n\t\t\t/*\r\n\t\t\tconst lila = new lichess();\r\n\t\t\tlila.setToken(data.access_token);\r\n\t\t\treturn await lila.teams.join('oxford-university-chess-club');\r\n\t\t\t*/ //Again, we've been CORS-ed\r\n\r\n\t\t\tawait axios.get('https://simple-lichess-keygen.glitch.me/join?token=' + data.access_token);\r\n\t\t} catch(e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\tthrow '';\r\n\t\t}\r\n\t}\r\n\r\n\tasync componentDidMount() {\r\n\t\tlet service = this.props?.match?.params.service;\r\n\t\tlet searchString = this.props?.location?.search || '?';\r\n\t\tlet { code, state } = searchString.slice(1).split('&').reduce((acc, curr) => {\r\n\t\t\tlet [k, v] = curr.split('=') as ['code' | 'state', string];\r\n\t\t\tacc[k] = v;\r\n\t\t\treturn acc;\r\n\t\t}, {} as {\r\n\t\t\tcode: string,\r\n\t\t\tstate: string\r\n\t\t});\r\n\t\tconsole.log(code);\r\n\t\tawait this.verify(code, service as 'lichess')\r\n\t\t\t.then(() => this.setState({ success: true }))\r\n\t\t\t.catch(() => this.setState({ success: false }))\r\n\t}\r\n\t\r\n\trender(): ReactElement {\r\n\t\tif (typeof this.state.success === 'undefined') return null;\r\n\t\treturn (\r\n\t\t\t<>\t\t\t\t\r\n\t\t\t\t<Helmet>\r\n\t\t\t\t\t<title>Authentication | OUCC</title>\r\n\t\t\t\t</Helmet>\r\n\t\t\t\t<div className={[styles.page, isMobile() ? styles.mobilePage : ''].join(' ')}>\r\n\t\t\t\t\t<div className={[styles.main, isMobile() ? styles.mobileMain : ''].join(' ')}>\r\n\t\t\t\t\t\t<div className={styles.section}>\r\n\t\t\t\t\t\t<h1>{this.state.success ? 'Successfully Authorised' : 'Failed to authorise'}</h1>\r\n\t\t\t\t\t\t\t<h3><a href='https://lichess.org/team/oxford-university-chess-club' target='_blank' rel='noopener noreferrer'>\r\n\t\t\t\t\t\t\t\tView team on Lichess.org\r\n\t\t\t\t\t\t\t</a></h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Footer />\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}","import React, {ReactElement, useState} from 'react';\r\n\r\n//import sha256 from 'sha256';\r\n\r\nimport { Helmet } from 'react-helmet';\r\nimport Footer from '../components/Footer';\r\nimport { isMobile } from '../utils/auth';\r\n//import MD5 from 'md5';\r\n\r\nimport styles from '../css/page.module.css';\r\nimport componentStyles from '../css/components.module.css';\r\n//import { lichess } from './config';\r\nimport axios from '../utils/axios';\r\n//import { capitalise } from '../utils/prototype';\r\n/*\r\nconst transporter = nodemailer.createTransport({\r\n\tservice: 'gmail',\r\n\tauth: {\r\n\t\tuser: 'oxfordunichess@gmail.com',\r\n\t\tpass: process.env.PASSWORD\r\n\t}\r\n});*/\r\n\r\nfunction mailchimpMail(email: string) {\r\n\treturn axios.get('http://simple-lichess-keygen.glitch.me/send?email=' + email)\r\n}\r\n\r\n/* Again we've been done dirty by CORS\r\nfunction mailchimpMail(email: string) {\r\n\tlet [FNAME, LNAME] = email.split('@')[0].split('.').map(v => capitalise(v));\r\n\tlet hash = MD5(email);\r\n\treturn axios({\r\n\t\tmethod: 'POST',\r\n\t\turl: `https://us20.api.mailchimp.com/3.0/lists/67a52a5dfd/members/${hash}/events`,\r\n\t\tdata: {\r\n\t\t\tname: 'lichess-team-registration'\r\n\t\t}\r\n\t})\r\n\t\t.catch(() => {\r\n\t\t\treturn axios({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl: `https://us20.api.mailchimp.com/3.0/lists/67a52a5dfd/members`,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\temail_address: hash,\r\n\t\t\t\t\tstatus: 'subscribed',\r\n\t\t\t\t\tmerge_fields: { FNAME, LNAME }\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n}\r\n\r\n\r\nfunction sendMail(email: string) {\r\n\tlet mailOptions = {\r\n\t\tfrom: 'youremail@gmail.com',\r\n\t\tto: 'myfriend@yahoo.com',\r\n\t\tsubject: 'Sending Email using Node.js',\r\n\t\thtml: (<div>\r\n\t\t\t<div>\r\n\t\t\t\t<img src=\"https://lichess1.org/assets/favicon.svg\" alt=\"lichess.org\"/>\r\n\t\t\t\t<h1>Authorize lazy-lila</h1>\r\n\t\t\t</div>\r\n\t\t\t<a>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button type=\"submit\" name=\"authorize\">Log into Lichess</button>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t\t<footer>\r\n\t\t\t\tOpen Authorization using the <a href={generateLink(email)}>Lichess API</a> through<br /><a\r\n\t\t\t\t\thref=\"https://github.com/theLAZYmd/lazy-lila\">lazy-lila</a> for Node.JS\r\n\t\t\t</footer>\r\n\t\t</div>).toString()\r\n\t}\r\n\treturn new Promise((res, rej) => {\r\n\t\ttransporter.sendMail(mailOptions, (error, info) => {\r\n\t\t\tif (error) rej(error);\r\n\t\t\telse res(info);\r\n\t\t});\r\n\t});\r\n}\r\n*/ /*\r\nfunction generateLink(email: string): string {\r\n\treturn 'https://oauth.lichess.org/oauth/authorize?' + [\r\n\t\t'response_type=code',\r\n\t\t'client_id=' + lichess.id,\r\n\t\t'redirect_uri=' + lichess.redirectUri,\r\n\t\t'scope=team:write',\r\n\t\t'state=' + email + '|' + sha256(email)\r\n\t].join('&')\r\n}*/\r\n\r\nexport default function Auth(): ReactElement {\r\n\r\n\tconst [success, setSuccess] = useState('');\r\n\tconst [error, setError] = useState('');\r\n\r\n\tasync function handleSubmit (e: React.FormEvent<HTMLFormElement>) {\r\n\t\te.preventDefault();\r\n\t\tlet form = e.target as HTMLFormElement;\r\n\t\tlet input = Array.from(form.elements).find(e => ('name' in e) && e['name'] === 'email') as HTMLInputElement;\r\n\t\tlet email = input.value.trim();\r\n\t\tif (!email.includes('@') || !email.endsWith('ox.ac.uk')) {\r\n\t\t\tform.reset();\r\n\t\t\tsetSuccess('');\r\n\t\t\tsetError('Invalid Oxford University email address');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetSuccess('Email sent!')\r\n\t\tsetError('');\r\n\t\tawait mailchimpMail(input.value);\r\n\t\tform.reset();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\t\t\t\t\r\n\t\t\t<Helmet>\r\n\t\t\t\t<title>Authentication | OUCC</title>\r\n\t\t\t</Helmet>\r\n\t\t\t<div className={[styles.page, isMobile() ? styles.mobilePage : ''].join(' ')}>\r\n\t\t\t\t<div className={[styles.main, isMobile() ? styles.mobileMain : ''].join(' ')}>\r\n\t\t\t\t\t<div className={styles.section}>\r\n\t\t\t\t\t\t<h1>Lichess Authentication</h1>\r\n\t\t\t\t\t\t<h4>Input a valid University of Oxford email address to be added to the <a href='https://lichess.org/team/oxford-university-chess-club'>Lichess team</a>.</h4>\r\n\t\t\t\t\t\t<form className={componentStyles.contactForm} onSubmit={handleSubmit} style={{\r\n\t\t\t\t\t\t\tpaddingTop: '20px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<table className={componentStyles.contactTable}>\r\n\t\t\t\t\t\t\t\t<tbody>\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>Email: </th>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type='text' name='email' size={55} />\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t<input type='submit' name='Submit' value='Send'/>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t{success || null}\r\n\t\t\t\t\t\t{error || null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={styles.section} style={{\r\n\t\t\t\t\t\tpadding: '10px'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\tWe can only contact subscribed members of our mailing list. If you enter your email above and you are not a subscribed member, you will instead receive an email asking you to subscribe. Return to this page once you have done so. Alternatively, subscribe here: <a href='https://mailchi.mp/e4bab2111329/oxfordunichess'>https://mailchi.mp/e4bab2111329/oxfordunichess</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Footer />\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\t\r\n\t\t</>\r\n\t);\r\n}","import React, { ReactElement, ReactNode } from 'react';\r\nimport './App.scss';\r\n//import { Root, Routes } from 'react-static';\r\nimport { BrowserRouter as Router, Route, Redirect, Switch } from 'react-router-dom';\r\n\r\nimport './index.d.ts';\r\n\r\nimport MobileHeader from './Header/mobile';\r\nimport Header from './Header/index';\r\nimport Page from './pages/Page';\r\nimport News from './pages/News';\r\nimport NotFound from './pages/NotFound';\r\n\r\nimport Callback from './Auth/Callback';\r\nimport Auth from './Auth/Auth';\r\n\r\nimport * as regexes from './utils/regexes';\r\nimport axios from './utils/axios';\r\nimport { GithubFile, IndexData } from './interfaces';\r\n\r\nimport cachedPages from './assets/index.json';\r\nimport { SessionContext } from './utils/contexts';\r\nimport { isMobile } from './utils/auth';\r\nimport Package from '../package.json';\r\n\r\nfor (let [k, v] of Object.entries(cachedPages)) {\r\n\tif ('redirect' in v) delete cachedPages[k as keyof typeof cachedPages];\r\n}\r\n\r\nexport default class App extends React.Component<{}, {\r\n\tindex: IndexData,\r\n\tarticles: string[],\r\n\tsessionID: string\r\n}> {\r\n\t\r\n\tpublic state = {\r\n\t\tindex: cachedPages as IndexData,\r\n\t\tarticles: [] as string[],\r\n\t\tsessionID: Math.random().toString(16).slice(2)\r\n\t}\r\n\r\n\tstatic getArticle(pathname: string, sessionID?: string): Promise<string> {\r\n\t\treturn axios({\r\n\t\t\turl: 'news/' + pathname,\r\n\t\t\tparams: { sessionID },\r\n\t\t\tmethod: 'GET',\r\n\t\t\tmaxRedirects: 5\r\n\t\t})\r\n\t\t\t.then(v => v.data)\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tif (e) console.error(e);\r\n\t\t\t\treturn '';\r\n\t\t\t});\r\n\t}\r\n\r\n\tstatic async getArticleList(sessionID?: string): Promise<GithubFile[]> {\r\n\t\treturn await axios({\r\n\t\t\tbaseURL: 'https://api.github.com/repos/oxfordunichess/oucc-backend/',\r\n\t\t\turl: 'contents/news/',\r\n\t\t\tparams: { sessionID },\r\n\t\t\tmethod: 'get',\r\n\t\t\tmaxRedirects: 5\r\n\t\t})\r\n\t\t\t.then(res => res.data)\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn [];\r\n\t\t\t});\r\n\t}\r\n\r\n\t//Index for page navigation\r\n\r\n\tstatic getIndex(sessionID?: string): Promise<IndexData> {\r\n\t\treturn axios({\r\n\t\t\turl: 'index.json',\r\n\t\t\tparams: { sessionID },\r\n\t\t})\r\n\t\t\t.then(res => res.data)\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t});\r\n\t}\r\n\r\n\tstatic async fetchArticles(sessionID: string): Promise<string[]> {\t\t\r\n\t\tlet data = await App.getArticleList(sessionID).catch((e) => {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn [];\r\n\t\t});\r\n\t\tlet filenames = (data || []).map(file => file.name);\r\n\t\tlet real = filenames.filter(name => name.endsWith('.md') && regexes.date.test(name));\r\n\t\tlet sorted = real.sort((a, b) => {\r\n\t\t\tlet a_date = new Date(a.split('_')[0]);\r\n\t\t\tlet b_date = new Date(b.split('_')[0]);\r\n\t\t\t// eslint-disable-next-line no-self-compare\r\n\t\t\tif (a_date.getTime() !== a_date.getTime()) return 1;\r\n\t\t\t// eslint-disable-next-line no-self-compare\r\n\t\t\tif (b_date.getTime() !== b_date.getTime()) return -1;\r\n\t\t\treturn b_date.getTime() - a_date.getTime();\r\n\t\t});\r\n\t\tlet articles = new Array(sorted.length);\r\n\t\tsorted.forEach((names, i) => articles[i] = App.getArticle(names, sessionID)\r\n\t\t\t.catch(console.error)\r\n\t\t);\r\n\t\treturn await Promise.all(articles);\r\n\t}\r\n\r\n\tcomponentDidMount(): void {\r\n\t\taxios.defaults.params = {};\r\n\t\taxios.defaults.params.sessionID = this.state.sessionID;\r\n\t\tPromise.all([\r\n\t\t\tApp.getIndex(this.state.sessionID).then(index => index ? this.setState({index}) : null),\r\n\t\t\tApp.fetchArticles(this.state.sessionID).then(articles => this.setState({articles}))\r\n\t\t]);\r\n\t}\r\n\r\n\trender(): ReactElement {\r\n\t\tlet markdownPaths = Object.entries(this.state.index).map(([k, v]) => {\r\n\t\t\tif (k.startsWith('_') || typeof v !== 'object') return null;\r\n\t\t\treturn (\r\n\t\t\t\t<Route exact path={`/${v.private ? 'private/' : ''}${k}`} key={k + '_route'} render={(props) => {\r\n\t\t\t\t\tif (v.open) window.open(v.open);\r\n\t\t\t\t\tif (v.redirect) return <Redirect to={v.redirect} />;\r\n\t\t\t\t\tlet page = k;\r\n\t\t\t\t\tif (v.file) page = v.file;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<SessionContext.Provider value={this.state.sessionID}>\r\n\t\t\t\t\t\t\t<Page\r\n\t\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\t\tpage={page}\r\n\t\t\t\t\t\t\t\ttitle={v.title}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</SessionContext.Provider>\r\n\t\t\t\t\t);\r\n\t\t\t\t}} />\r\n\t\t\t);\r\n\t\t});\r\n\t\tlet routeMap = new Map() as Map<string, ReactNode>;\r\n\t\tObject.entries(this.state.index).forEach(([k, v]) => {\r\n\t\t\tif (k.startsWith('_') || typeof v !== 'object') return null;\r\n\t\t\trouteMap.set(k, (\r\n\t\t\t\t<Route exact path={`/${v.private ? 'private/' : ''}${k}`} key={k + '_route'} render={(props) => {\r\n\t\t\t\t\tif (v.open) window.open(v.open);\r\n\t\t\t\t\tif (v.redirect) return <Redirect to={v.redirect} />;\r\n\t\t\t\t\tlet page = k;\r\n\t\t\t\t\tif (v.file) page = v.file;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<SessionContext.Provider value={this.state.sessionID}>\r\n\t\t\t\t\t\t\t<Page\r\n\t\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\t\tpage={page}\r\n\t\t\t\t\t\t\t\ttitle={v.title}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</SessionContext.Provider>\r\n\t\t\t\t\t);\r\n\t\t\t\t}} />\r\n\t\t\t));\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<SessionContext.Provider value={this.state.sessionID}>\r\n\t\t\t\t<Router basename={process.env.PUBLIC_URL}> {/*\r\n\t\t\t\t\t<Root>\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route path='/articleData.json' render={() => JSON.stringify(this.state.articles, null, 4)} />\r\n\t\t\t\t\t\t\t<Route path='version' render={() => Package.version} />\r\n\t\t\t\t\t\t\t<Routes render={({routePath}) => {\r\n\t\t\t\t\t\t\t\treturn routeMap.get(routePath) || null;\r\n\t\t\t\t\t\t\t}} />}\r\n\t\t\t\t\t\t\t<Route exact path='/' render={(props) => <Page {...props} page='main' />} />\r\n\t\t\t\t\t\t\t<Route exact path='/curr_news' render={(props) => <News {...props} title='Current News' articles={this.state.articles} />}/>\r\n\t\t\t\t\t\t\t<Route path='*' component={NotFound} status={404} />\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</Root>*/}\r\n\t\t\t\t\t<Route render={({location}) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\t\t\tswitch (location.pathname) {\r\n\t\t\t\t\t\t\t\t\t\tcase ('/articleData.json'):\r\n\t\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t\tcase ('/version'):\r\n\t\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\tif (isMobile()) return <MobileHeader />;\r\n\t\t\t\t\t\t\t\t\t\t\telse return <Header articles={this.state.articles} />;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\t<Switch location={location}>\r\n\t\t\t\t\t\t\t\t\t{markdownPaths}\r\n\t\t\t\t\t\t\t\t\t<Route exact path='/' render={(props) => <Page {...props} page='main' />} />\r\n\t\t\t\t\t\t\t\t\t<Route exact path='/articleData.json' render={() => JSON.stringify(this.state.articles, null, 4)} />\r\n\t\t\t\t\t\t\t\t\t<Route exact path='version' render={() => Package.version} />\r\n\t\t\t\t\t\t\t\t\t<Route exact path='/curr_news' render={(props) => <News {...props} title='Current News' articles={this.state.articles} />}/>\r\n\t\t\t\t\t\t\t\t\t<Route exact path='/auth' render={() => <Auth />} />\r\n\t\t\t\t\t\t\t\t\t<Route exact path='/callback/:service/' render={(props) => <Callback {...props} />} />\r\n\t\t\t\t\t\t\t\t\t<Route path='*' component={NotFound} status={404} />\r\n\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}/>\r\n\t\t\t\t</Router>\r\n\t\t\t</SessionContext.Provider>\r\n\t\t);\r\n\t}\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t// [::1] is the IPv6 localhost address.\n\twindow.location.hostname === '[::1]' ||\n\t// 127.0.0.1/8 is considered localhost for IPv4.\n\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t);\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}","import React from 'react';\r\nimport {render} from 'react-dom';\r\nimport './index.css';\r\nimport App from './App.tsx';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nrender(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__2JDtH\",\"bannerContainer\":\"header_bannerContainer__zubWY\",\"banner\":\"header_banner__2Li7q\",\"nav\":\"header_nav__5Zo-d\",\"section\":\"header_section__1mUJG\",\"left\":\"header_left__2fvQE\",\"right\":\"header_right__3CMex\",\"spacer\":\"header_spacer__2BTqm\",\"dropParent\":\"header_dropParent__28y82\",\"dropChild\":\"header_dropChild__3XMUY\",\"expand-down\":\"header_expand-down__1tVgs\",\"selected\":\"header_selected__2OTKR\",\"oucc_logo\":\"header_oucc_logo__ntMUg\",\"newsFeed\":\"header_newsFeed__35rvd\",\"intro\":\"header_intro__1vMZ4\",\"runner\":\"header_runner__2doT9\",\"mobileHeader\":\"header_mobileHeader__l_Ral\",\"mobileContainer\":\"header_mobileContainer__-3p_-\",\"mobileBanner\":\"header_mobileBanner__296K-\",\"mobileTextContainer\":\"header_mobileTextContainer__jayG1\",\"mobileMenu\":\"header_mobileMenu__3PRnh\",\"mobileLinks\":\"header_mobileLinks__2NdCj\",\"mobileLinksShown\":\"header_mobileLinksShown__1hTeH\",\"expand-up\":\"header_expand-up__1WP4X\",\"mobileLinksHidden\":\"header_mobileLinksHidden__23LiN\",\"contract-down\":\"header_contract-down__2ZWS4\",\"mobileThumbContainer\":\"header_mobileThumbContainer__18KQy\",\"mobileSection\":\"header_mobileSection__yzF8t\"};"],"sourceRoot":""}